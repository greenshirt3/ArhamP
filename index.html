<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Arham Printers - Printing and Advertising Service</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Printing Services, Business Cards, Stationery, Marketing Materials" name="keywords">
    <meta content="Professional printing services in Pakistan for business cards, brochures, flyers, and more." name="description">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    
    <style>
        /* General Layout and Utility Styles */
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .final-price-box {
            background: var(--bs-primary);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            text-align: center;
            display: none; 
        }
        .final-price-box h4 {
            color: white;
        }

        /* Clickable Card Variations (Standard Items) */
        .choice-card {
            cursor: pointer;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px 15px;
            text-align: center;
            transition: all 0.2s ease;
            flex-grow: 1;
            min-width: 120px;
        }
        .choice-card:hover {
            border-color: var(--bs-secondary);
            background-color: #fff8f8;
        }
        .choice-card.selected {
            border-color: var(--bs-primary);
            background-color: var(--bs-primary);
            color: white;
            box-shadow: 0 0 10px rgba(242, 139, 0, 0.3);
        }
        .choice-card input[type="radio"] {
            display: none;
        }
        .choice-card .label-text {
            font-weight: 500;
            color: var(--bs-dark);
            display: block;
        }
        .choice-card.selected .label-text {
            color: white;
        }
        .product-option-group {
            margin-bottom: 1.5rem;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .product-option-group label {
            font-weight: 600;
            color: var(--bs-dark);
            margin-bottom: 0.75rem;
            display: block;
            font-size: 1.1rem;
        }
        .print-card {
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            background: #fff;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            transition: 0.3s;
        }
        .print-card:hover {
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
    </style>
</head>

<body>
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <div class="container-fluid bg-dark text-white-50 py-2 px-0 d-none d-lg-block">
        <div class="row gx-0 align-items-center">
            <div class="col-lg-7 px-5 text-start">
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <small class="fa fa-phone-alt me-2"></small>
                    <small>+92 300 6238233</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <small class="far fa-envelope-open me-2"></small>
                    <small>info@arhamprinters.pk</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <small class="far fa-clock me-2"></small>
                    <small>Mon - Fri : 09 AM - 09 PM</small>
                </div>
            </div>
            <div class="col-lg-5 px-5 text-end">
                <div class="h-100 d-inline-flex align-items-center">
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-facebook-f"></i></a>
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-twitter"></i></a>
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-linkedin-in"></i></a>
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </div>
    <nav class="navbar navbar-expand-lg bg-white navbar-light sticky-top px-4 px-lg-5">
        <a href="#home-section" class="navbar-brand d-flex align-items-center" onclick="showSection('home')">
            <h1 class="m-0 text-primary"><i class="fa fa-print me-3"></i>Arham Printers</h1>
        </a>
        <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav mx-auto bg-light pe-4 py-3 py-lg-0">
                <a href="#home-section" class="nav-item nav-link active" onclick="showSection('home')">Home</a>
                <a href="#shop-catalog" class="nav-item nav-link" onclick="showSection('home')">Products</a>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Shop</a>
                    <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Shop</a>
                    <div class="dropdown-menu bg-light border-0 m-0">
                        <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('3D Wallpaper')">3D Wallpaper</a>
                        <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Box Packaging')">Box Packaging</a>
                        <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Business Essentials')">Business Essentials</a>
                        <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Digital Printing')">Digital Printing</a>
                        <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Flags and Fabric')">Flags and Fabric</a>
                        <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Marketing Essentials')">Marketing Essentials</a>
                        <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Office Essentials')">Office Essentials</a>
                        <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Photo Printing')">Photo Printing</a>
                        <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Promotional Items')">Promotional Items</a>
                        <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Shields')">Shields</a>
                        <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Souvenirs')">Souvenirs</a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item" onclick="showSection('quote')">Get Custom Quote</a>
                    </div>
                </div>
                <a href="#" class="nav-item nav-link" onclick="showSection('contact')">Contact</a>
            </div>
            <div class="h-100 d-lg-inline-flex align-items-center">
                <a class="btn-sm-square bg-white text-primary rounded-circle me-4 position-relative" href="#" onclick="showSection('quote')">
                    <i class="fas fa-file-invoice"></i>
                </a>
                <a href="#" class="btn btn-primary py-2 px-3 rounded-0 d-none d-lg-block" onclick="showSection('quote')">Get a Quote<i
                        class="fa fa-arrow-right ms-3"></i></a>
            </div>
        </div>
    </nav>
    <section id="home-section" class="section active">
        <div class="container-fluid hero-header bg-light py-5">
            <div class="container py-5">
                <div class="row g-5 align-items-center">
                    <div class="col-lg-6">
                        <h1 class="display-4 mb-3 animated slideInDown">The Future of <span class="text-primary">Printing</span> is Here</h1>
                        <p class="animated slideInDown">Experience professional quality and stunning designs for all your business needsâ€”from letterheads to marketing materials. Arham Printers delivers excellence.</p>
                        <a href="#shop-catalog" class="btn btn-primary py-3 px-5 animated slideInDown" onclick="showSection('home')">Explore Products</a>
                    </div>
                    <div class="col-lg-6 animated fadeIn">
                        <div class="owl-carousel header-carousel">
                            <div class="owl-carousel-item">
                                <img class="img-fluid" src="img/carousel-1.png" alt="Printing Services">
                            </div>
                            <div class="owl-carousel-item">
                                <img class="img-fluid" src="img/carousel-2.png" alt="Business Printing">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="print-card bg-light wow fadeInUp" data-wow-delay="0.1s">
                        <i class="fas fa-file-pdf fa-3x text-secondary mb-3"></i>
                        <h3 class="mb-3">Need Quick Document & Photo Prints?</h3>
                        <p class="text-muted">Upload your files now for fast, high-quality printing, binding, and finishing.</p>
                        <button class="btn btn-primary py-3 px-5" onclick="showSection('print-service')">
                            Print Your Documents & Photos
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid px-0">
            <div class="row g-0">
                <div class="col-6 col-md-4 col-lg-2 border-start border-end wow fadeInUp" data-wow-delay="0.1s">
                    <div class="p-4">
                        <div class="d-inline-flex align-items-center">
                            <i class="fa fa-sync-alt fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Free Return</h6>
                                <p class="mb-0">30 days money back guarantee!</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.2s">
                    <div class="p-4">
                        <div class="d-flex align-items-center">
                            <i class="fab fa-telegram-plane fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Free Shipping</h6>
                                <p class="mb-0">Free shipping on all order</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.3s">
                    <div class="p-4">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-life-ring fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Support 24/7</h6>
                                <p class="mb-0">We support online 24 hrs a day</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.4s">
                    <div class="p-4">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-credit-card fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Receive Gift Card</h6>
                                <p class="mb-0">Recieve gift all over oder $50</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.5s">
                    <div class="p-4">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-lock fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Secure Payment</h6>
                                <p class="mb-0">We Value Your Security</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.6s">
                    <div class="p-4">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-blog fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Online Service</h6>
                                <p class="mb-0">Free return products in 30 days</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid shop py-5" id="shop-catalog">
            <div class="container py-5">
                <div class="row g-4">
                    <div class="col-lg-3 wow fadeInUp" data-wow-delay="0.1s">
                         <div class="product-categories mb-4">
                            <h4>Products Categories</h4>
                            <ul class="list-unstyled" id="productCategoriesList">
                                </ul>
                        </div>
                        <div class="price mb-4">
                            <h4 class="mb-2">Price Range (PKR)</h4>
                            <input type="range" class="form-range w-100" id="rangeInput" name="rangeInput" min="0" max="10000"
                                value="0" oninput="amount.value=rangeInput.value">
                            <output id="amount" name="amount" min-velue="0" max-value="10000" for="rangeInput">0</output>
                            <div class=""></div>
                        </div>
                        
                        <a href="#">
                            <div class="position-relative">
                                <img src="img/product-banner-2.jpg" class="img-fluid w-100 rounded" alt="Image">
                                <div class="text-center position-absolute d-flex flex-column align-items-center justify-content-center rounded p-4"
                                    style="width: 100%; height: 100%; top: 0; right: 0; background: rgba(242, 139, 0, 0.3);">
                                    <h5 class="display-6 text-primary">SALE</h5>
                                    <h4 class="text-secondary">Get UP To 50% Off</h4>
                                    <a href="#" class="btn btn-primary rounded-pill px-4">Shop Now</a>
                                </div>
                            </div>
                        </a>
                    </div>
                    
                    <div class="col-lg-9 wow fadeInUp" data-wow-delay="0.1s">
                        <div class="row g-4" id="main-product-catalog">
                            </div>
                    </div>
                </div>
            </div>
        </div>
        </section>

    <section id="product-detail-section" class="section">
        <div class="container-fluid page-header py-5">
            <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s" id="detail-product-name-header">Product Details</h1>
            <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
                <li class="breadcrumb-item"><a href="#" onclick="showSection('home')">Home</a></li>
                <li class="breadcrumb-item active text-white">Details</li>
            </ol>
        </div>

        <div class="container-fluid py-5">
            <div class="container py-5">
                <div class="row g-5">
                    <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
                        <div class="d-flex justify-content-center">
                            <img id="detail-product-image" src="img/placeholder.jpg" class="img-fluid rounded" alt="Product Image" style="max-height: 400px;">
                        </div>
                    </div>
                    
                    <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.3s">
                        <h2 class="fw-bold mb-4" id="detail-product-name-body">Product Name</h2>
                        
                        <div id="custom-area-inputs" style="display: none;">
                            <div class="product-option-group" data-option-key="Dimensions">
                                <label>Wall/Piece Dimensions (Feet):</label>
                                <div class="d-flex gap-3">
                                    <input type="number" id="input-width" min="1" placeholder="Width" class="form-control" oninput="updateFinalPrice()">
                                    <span class="align-self-center">x</span>
                                    <input type="number" id="input-height" min="1" placeholder="Height" class="form-control" oninput="updateFinalPrice()">
                                </div>
                                <small class="text-muted mt-2 d-block" id="areaDisplay"></small>
                            </div>
                            
                            <div class="product-option-group" data-option-key="Quantity">
                                <label>Number of Pieces/Walls:</label>
                                <input type="number" id="input-custom-qty" min="1" value="1" class="form-control" oninput="updateFinalPrice()">
                            </div>
                            
                            <div class="alert alert-warning mt-3" id="designFeeDisplay"></div>
                            <div class="alert alert-danger mt-3" id="areaConstraintWarning" style="display: none;"></div>
                        </div>

                        <div id="standard-options-fields">
                            </div>

                        <div class="final-price-box" id="finalPriceBox">
                            <h4 class="mb-2">Final Price</h4>
                            <h3 class="display-6 fw-bold" id="finalPriceDisplay">PKR 0</h3>
                            
                            <button class="btn btn-secondary py-2 px-4 w-100 mt-3" onclick="addToCartFromDetails()">
                                <i class="fab fa-whatsapp me-2"></i> Place Order via WhatsApp
                            </button>
                        </div>
                        
                        <div class="alert alert-info mt-3" id="selectionWarning" style="display: block;">
                            Please enter dimensions/quantity or select all options above to see the final price.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="print-service-section" class="section">
        <div class="container-fluid page-header py-5">
            <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s">Print Your Documents</h1>
            <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
                <li class="breadcrumb-item"><a href="#" onclick="showSection('home')">Home</a></li>
                <li class="breadcrumb-item active text-white">Quick Print</li>
            </ol>
        </div>

        <div class="container-fluid py-5">
            <div class="container py-5">
                <div class="row g-5">
                    
                    <div class="col-lg-4 wow fadeInUp" data-wow-delay="0.1s">
                        <div class="bg-light p-4 rounded sticky-top" style="top: 100px;">
                            <h4 class="mb-4 text-primary"><i class="fas fa-upload me-2"></i> Step 1: Upload Files</h4>
                            <p>Upload your PDF or image files. Please ensure documents are finalized before uploading.</p>
                            <input type="file" id="print-file-upload" class="form-control" multiple accept=".pdf,.jpg,.jpeg,.png">
                            
                            <h4 class="mt-4 mb-3 text-primary"><i class="fas fa-file-alt me-2"></i> File Summary</h4>
                            <ul id="file-list-summary" class="list-unstyled">
                                <li class="text-muted">No files selected.</li>
                            </ul>
                            
                            <hr>
                            <div class="alert alert-info" role="alert">
                                **File Limits:** Max 50 pages per file. Total upload size limit applies.
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-8 wow fadeInUp" data-wow-delay="0.3s">
                        <form id="quick-print-form">
                            <h3 class="mb-4 text-dark"><i class="fas fa-cogs me-2"></i> Step 2: Configure Print Options</h3>
                            
                            <div class="product-option-group">
                                <label>1. Paper Size & Stock:</label>
                                <div class="d-flex flex-wrap gap-3">
                                    <label class="choice-card" for="size-a4"><input type="radio" id="size-a4" name="print-size" value="A4" required><span class="label-text">A4 (8.3" x 11.7")</span></label>
                                    <label class="choice-card" for="size-a3"><input type="radio" id="size-a3" name="print-size" value="A3"><span class="label-text">A3 (11.7" x 16.5")</span></label>
                                    <label class="choice-card" for="size-legal"><input type="radio" id="size-legal" name="print-size" value="Legal"><span class="label-text">Legal (8.5" x 14")</span></label>
                                </div>
                            </div>
                            
                            <div class="product-option-group">
                                <label>2. Colour & Sides:</label>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="d-block mb-2">Printing:</label>
                                        <div class="d-flex gap-3">
                                            <label class="choice-card" for="color-bw"><input type="radio" id="color-bw" name="print-color" value="Black & White" required><span class="label-text">Black & White</span></label>
                                            <label class="choice-card" for="color-full"><input type="radio" id="color-full" name="print-color" value="Full Colour"><span class="label-text">Full Colour</span></label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="d-block mb-2">Layout:</label>
                                        <div class="d-flex gap-3">
                                            <label class="choice-card" for="side-single"><input type="radio" id="side-single" name="print-side" value="Single-Sided" required><span class="label-text">Single-Sided</span></label>
                                            <label class="choice-card" for="side-double"><input type="radio" id="side-double" name="print-side" value="Double-Sided"><span class="label-text">Double-Sided</span></label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="product-option-group">
                                <label>3. Finishing & Binding (Optional):</label>
                                <select class="form-select mb-3" id="binding-type">
                                    <option value="None" selected>No Binding/Stapling</option>
                                    <option value="Saddle Stitch">Saddle Stitch (Stapled)</option>
                                    <option value="Comb Binding">Comb Binding (Spiral)</option>
                                    <option value="Wire Binding">Wire Binding</option>
                                </select>
                                
                                <select class="form-select" id="laminate-type">
                                    <option value="None" selected>No Lamination/Cover</option>
                                    <option value="Matt Cover">Matt Lamination Cover</option>
                                    <option value="Gloss Cover">Gloss Lamination Cover</option>
                                </select>
                            </div>
                            
                            <h3 class="mt-5 mb-4 text-dark"><i class="fas fa-user-check me-2"></i> Step 3: Contact & Order</h3>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <input type="text" class="form-control" id="print-customer-name" placeholder="Your Name" required>
                                </div>
                                <div class="col-md-6">
                                    <input type="tel" class="form-control" id="print-customer-phone" placeholder="WhatsApp Number" required>
                                </div>
                                <div class="col-12">
                                    <textarea class="form-control" id="print-notes" rows="3" placeholder="Any special instructions or delivery details?"></textarea>
                                </div>
                                <div class="col-12">
                                    <button class="btn btn-secondary w-100 py-3" type="submit">
                                        <i class="fab fa-whatsapp me-2"></i> Request Quote & Final Print Price
                                    </button>
                                </div>
                            </div>
                        </form>
                        
                        <div class="mt-5 p-4 bg-white rounded border">
                            <h4 class="text-secondary">Terms & Conditions</h4>
                            <p class="small text-muted">By submitting, you agree to the following:</p>
                            <ul class="small text-muted text-start">
                                <li>All prices are estimates. Final price confirmed upon review of uploaded files.</li>
                                <li>Minimum print quantity/order value may apply.</li>
                                <li>We reserve the right to decline print jobs containing illegal or inappropriate content.</li>
                                <li>Files must be finalized and print-ready (preferably PDF format).</li>
                                <li>File security is maintained, but ensure sensitive files are handled appropriately before uploading.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="quote-section" class="section">
        <div class="container-fluid page-header py-5">
            <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s">Get a Custom Quote</h1>
            <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
                <li class="breadcrumb-item"><a href="#" onclick="showSection('home')">Home</a></li>
                <li class="breadcrumb-item active text-white">Quote</li>
            </ol>
        </div>

        <div class="container-fluid py-5">
            <div class="container py-5">
                <div class="row g-4 justify-content-center">
                    <div class="col-lg-8">
                        <div class="bg-light p-4 rounded">
                            <form id="quote-form">
                                <h3 class="mb-4">Quick Inquiry</h3>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="quote-name" placeholder="Your Name" required>
                                            <label for="quote-name">Your Name</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="tel" class="form-control border-0" id="quote-phone" placeholder="WhatsApp Phone" required>
                                            <label for="quote-phone">WhatsApp Phone</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="quote-product" placeholder="Product Name (e.g., Visiting Cards, 3D Wallpaper)">
                                            <label for="quote-product">Product Name / Type</label>
                                        </div>
                                    </div>
                                     <div class="col-12">
                                        <div class="form-floating">
                                            <input type="number" class="form-control border-0" id="quote-quantity" placeholder="Quantity or Total Area (e.g., 500 cards, 100 sq ft)">
                                            <label for="quote-quantity">Quantity / Estimated Area</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <textarea class="form-control border-0" placeholder="Details of your inquiry (Size, Finish, Quality, Message)" id="quote-details" style="height: 150px" required></textarea>
                                            <label for="quote-details">Inquiry Message / Specifications</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <button class="btn btn-primary w-100 py-3" type="submit">Submit Quote via WhatsApp</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="contact-section" class="section">
        <div class="container-fluid page-header py-5">
            <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s">Contact Us</h1>
            <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
                <li class="breadcrumb-item"><a href="#" onclick="showSection('home')">Home</a></li>
                <li class="breadcrumb-item active text-white">Contact</li>
            </ol>
        </div>

        <div class="container-fluid py-5">
            <div class="container py-5">
                <div class="row g-4">
                    <div class="col-lg-4 wow fadeInUp" data-wow-delay="0.1s">
                        <div class="bg-light p-4 rounded">
                            <div class="d-flex align-items-center mb-4">
                                <div class="d-flex align-items-center justify-content-center border border-primary rounded-circle mb-3"
                                    style="width: 60px; height: 60px;">
                                    <i class="fa fa-map-marker-alt text-primary fs-4"></i>
                                </div>
                                <div class="ms-4">
                                    <h5 class="mb-2">Our Location</h5>
                                    <p class="mb-0">Domela Chowk,Tanda Road, Jalalpur Jattan</p>
                                </div>
                            </div>
                            
                            <div class="d-flex align-items-center mb-4">
                                <div class="d-flex align-items-center justify-content-center border border-primary rounded-circle mb-3"
                                    style="width: 60px; height: 60px;">
                                    <i class="fa fa-phone-alt text-primary fs-4"></i>
                                </div>
                                <div class="ms-4">
                                    <h5 class="mb-2">Call Us</h5>
                                    <p class="mb-0">+92 300 6238233</p>
                                </div>
                            </div>
                            
                            <div class="d-flex align-items-center">
                                <div class="d-flex align-items-center justify-content-center border border-primary rounded-circle mb-3"
                                    style="width: 60px; height: 60px;">
                                    <i class="fa fa-envelope text-primary fs-4"></i>
                                </div>
                                <div class="ms-4">
                                    <h5 class="mb-2">Email Us</h5>
                                    <p class="mb-0">info@arhamprinters.pk</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-8 wow fadeInUp" data-wow-delay="0.3s">
                        <div class="bg-light p-4 rounded">
                            <form id="contact-form-whatsapp">
                                <h3 class="mb-4">Send a Direct Message</h3>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="contact-name" placeholder="Your Name" required>
                                            <label for="contact-name">Your Name</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="contact-subject" placeholder="Subject" required>
                                            <label for="contact-subject">Subject</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <textarea class="form-control border-0" placeholder="Leave a message here" id="contact-message" style="height: 150px" required></textarea>
                                            <label for="contact-message">Message</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <button class="btn btn-primary w-100 py-3" type="submit">Send Message via WhatsApp</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="container-fluid footer py-5 wow fadeIn" data-wow-delay="0.2s">
        <div class="container py-5">
            <div class="row g-4">
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fas fa-map-marker-alt fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Address</h4>
                            <p class="mb-2">Domela Chowk,Tanda Road, Jalalpur Jattan</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fas fa-envelope fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Mail Us</h4>
                            <p class="mb-2">info@arhamprinters.pk</p>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <a href="https://wa.me/923006238233" target="_blank" class="text-decoration-none">
                            <div class="rounded-circle bg-success d-flex align-items-center justify-content-center mb-4"
                                style="width: 70px; height: 70px;">
                                <i class="fab fa-whatsapp fa-2x text-white"></i>
                            </div>
                        </a>
                        <div>
                            <h4 class="text-white">Direct Contact</h4>
                            <a href="https://wa.me/923006238233" target="_blank" class="text-white-50 text-decoration-none">
                                <p class="mb-2">+92 300 6238233</p>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fab fa-facebook-f fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Follow Us</h4>
                            <div class="d-flex pt-2">
                                <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i
                                        class="fab fa-twitter"></i></a>
                                <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i
                                        class="fab fa-facebook-f"></i></a>
                                <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i
                                        class="fab fa-youtube"></i></a>
                                <a class="btn btn-square btn-outline-light rounded-circle me-0" href=""><i
                                        class="fab fa-linkedin-in"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="container-fluid copyright">
            <div class="container">
                <div class="row">
                   <div class="col-12 text-center mb-3 mb-md-0">
                        <span class="text-white">
                    <a href="#" class="text-white">
                        <i class="fas fa-copyright text-light me-2"></i>
                        Arham Printers
                    </a>, All rights reserved 2025.
                </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a href="#" class="btn btn-primary btn-lg-square back-to-top"><i class="fa fa-arrow-up"></i></a>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>

    <script>
    // --- Configuration ---
    const PUBLIC_DATA_URL = 'customer-data.json'; 
    const WHATSAPP_NUMBER = '923006238233'; 
    
    let allProducts = {}; 
    let currentProduct = null; 

    // Global stores for pricing logic
    let allProductGroups = {};
    let currentSelectedVariations = {}; 
    let designTiers = []; 
    let areaBasedMeta = {}; 

    // --- Core Functions ---

    async function initialAppLoad() {
        let rawData;
        try {
            const response = await fetch(PUBLIC_DATA_URL);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            rawData = await response.json();
        } catch (error) {
            console.error("Failed to load shop data:", error);
            showAlert("Failed to load product data. Check the developer console.", 'error');
            return;
        }
        
        const productGroups = initialProductSetup(rawData);
        renderMainCatalog(productGroups);
        
        // Populate sidebar categories for filtering
        populateSidebarCategories();
        
        if (typeof WOW !== 'undefined') { new WOW().init(); }
        
        document.getElementById('home-section').classList.add('active');

        // Set up form submission handlers for WhatsApp routing
        document.getElementById('quote-form').addEventListener('submit', handleQuoteSubmission);
        document.getElementById('contact-form-whatsapp').addEventListener('submit', handleContactSubmission);
        document.getElementById('quick-print-form').addEventListener('submit', handlePrintServiceSubmission); // NEW HANDLER
    }
    
    // Function to populate the sidebar with the new main categories
    function populateSidebarCategories() {
        const container = document.getElementById('productCategoriesList');
        container.innerHTML = '';
        
        const categoriesSet = new Set();
        Object.values(allProductGroups).forEach(group => {
            if (group.mainCategory && group.mainCategory !== "System Data") {
                categoriesSet.add(group.mainCategory);
            }
        });

        Array.from(categoriesSet).sort().forEach(category => {
            container.innerHTML += `
                <li>
                    <div class="categories-item">
                        <a href="#shop-catalog" class="text-dark" onclick="event.preventDefault(); filterCatalog('${category}')">
                            <i class="fas fa-tags text-primary me-2"></i> ${category}
                        </a>
                    </div>
                </li>
            `;
        });
    }

    // Helper function to smartly parse the flat item name into attributes
    function parseAttributes(baseName, fullName) {
        let attributes = {
            'Price': allProducts[fullName].price,
            'FullName': fullName
        };

        const cleanName = fullName.replace(baseName, '').trim();

        if (baseName === 'LetterPads' || baseName === 'Ishtihar' || baseName === 'Pamphlet/Menu') {
            const qualityMatch = cleanName.match(/(\d+g)/);
            const sizeMatch = cleanName.match(/(A4\/2|A4|\d+x\d+)/);
            const colorMatch = cleanName.match(/(\d+ Color|Single Color|Black)/);

            attributes['Paper Quality'] = qualityMatch ? qualityMatch[0] : 'Standard';
            attributes['Paper Size'] = sizeMatch ? sizeMatch[0] : 'Standard';
            attributes['Printing Color'] = colorMatch ? colorMatch[0] : 'Standard';
            
        } else if (baseName === 'Visiting Cards') {
            const parts = cleanName.split(' ');
            attributes['Stock'] = parts[0] || 'Standard';
            attributes['Sides'] = parts[1] === 'Double' || parts[1] === 'Single' ? parts[1] : 'Single';
            attributes['Finish'] = parts.length > 2 ? parts.slice(2).join(' ') : 'None';

        } else {
            // Default for items like Mugs, Caps, etc.
            attributes['Type/Model'] = cleanName || fullName;
        }

        return attributes;
    }


    // Initial setup to categorize all product items and extract pricing metadata
    function initialProductSetup(rawData) {
        const productGroups = {};
        
        rawData.calculatorData.items.forEach(item => {
            const baseName = item.subcategory;
            const fullName = item.itemName;

            // 1. Capture Design Tiers and Area-Based Metadata
            if (baseName === "PanaflexDesignTiers" && item.tiers) {
                designTiers = item.tiers;
                return; 
            }
            if (item.isAreaBased) {
                areaBasedMeta[baseName] = { 
                    rate: item.price, 
                    minArea: item.minArea || 0 
                };
            }

            // 2. Map all items to a flattened allProducts (for cart lookups)
            allProducts[fullName] = {
                price: item.price,
                imageFile: `${baseName.replace(/\//g, '-')}.jpg` 
            };

            // 3. Group the data by base product (subcategory) for the catalog
            if (!productGroups[baseName]) {
                const mainCat = item.mainCategory || 'Uncategorized';

                productGroups[baseName] = {
                    baseName: baseName,
                    minPrice: item.price,
                    imageFile: `${baseName.replace(/\//g, '-')}.jpg`,
                    isAreaBased: item.isAreaBased || false,
                    mainCategory: mainCat,
                    combinations: [] 
                };
            }

            // Update minimum price
            if (item.price < productGroups[baseName].minPrice) {
                productGroups[baseName].minPrice = item.price;
            }

            // 4. Parse attributes for rendering standard variations
            const attributes = parseAttributes(baseName, fullName);

            productGroups[baseName].combinations.push(attributes);
            allProducts[fullName].attributes = attributes;
            allProducts[fullName].imageFile = productGroups[baseName].imageFile;
        });
        
        allProductGroups = productGroups;
        return productGroups;
    }


    // --- Render Simplified Main Catalog ---
    function renderMainCatalog(productGroups) {
        // Renders all products initially
        filterCatalog(null); 
    }

    // New function to filter the product catalog by the top-level mainCategory
    function filterCatalog(mainCategory = null) {
        showSection('home');
        const container = document.getElementById('main-product-catalog');
        let html = '';
        const productGroups = allProductGroups;
        
        const filteredKeys = Object.keys(productGroups).filter(key => {
            const product = productGroups[key];
            if (key === "PanaflexDesignTiers") return false;
            if (!mainCategory) return true; // Show all products
            return product.mainCategory === mainCategory;
        });

        if (filteredKeys.length === 0) {
            container.innerHTML = `<h3 class="text-center w-100 py-5">No products found in "${mainCategory || 'catalog'}".</h3>`;
            return;
        }
        
        const getMinPrice = (baseName) => {
            const group = allProductGroups[baseName];
            if (!group || group.combinations.length === 0) return 40; 
            if (group.isAreaBased && areaBasedMeta[baseName]) return areaBasedMeta[baseName].rate;
            return group.combinations.reduce((min, combo) => Math.min(min, combo.Price), Infinity);
        };

        filteredKeys.forEach(key => {
            const product = productGroups[key];
            const imagePath = `img/products/${product.imageFile}`;
            const displayPrice = getMinPrice(key);
            const pricePrefix = product.isAreaBased ? 'Rate/Sq Ft: PKR' : 'Starting from: PKR';
            const buttonText = product.isAreaBased ? 'Configure Area' : 'View Details';

            html += `
            <div class='col-md-4 col-sm-6 mb-4'>
                <div class='card h-100 shadow-sm'>
                    <img src='${imagePath}' onerror="this.onerror=null;this.src='img/products/${key.replace(/\//g, '-')}.png';" class='card-img-top' alt='${product.baseName}'>
                    <div class='card-body text-center'>
                        <h5 class='card-title'>${product.baseName}</h5>
                        <p class='mt-2 text-primary fw-bold'>${pricePrefix} ${displayPrice.toLocaleString('en-PK', { minimumFractionDigits: 0 })}</p>
                        <button class="btn btn-primary w-100 mt-2" onclick="showProductDetails('${product.baseName.replace(/\//g, '\\/')}')"><i class="fas fa-search me-2"></i> ${buttonText}</button>
                    </div>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
    }


    // 4. Navigate to and Populate Product Detail Page
    function showProductDetails(productName) {
        const name = productName.replace(/\\/g, ''); 
        const productData = allProductGroups[name];
        currentProduct = productData;
        currentSelectedVariations = {}; 

        if (!currentProduct) {
            showAlert(`Product "${name}" details not found.`, 'error');
            return;
        }

        // Update headers and image
        document.getElementById('detail-product-name-header').textContent = currentProduct.baseName;
        document.getElementById('detail-product-name-body').textContent = currentProduct.baseName;
        const imagePath = `img/products/${currentProduct.imageFile}`;
        document.getElementById('detail-product-image').src = imagePath;
        document.getElementById('detail-product-image').onerror = function() { 
             this.src = `img/products/${currentProduct.baseName.replace(/\//g, '-')}.png`; 
        };

        const areaInputs = document.getElementById('custom-area-inputs');
        const standardOptions = document.getElementById('standard-options-fields');
        
        document.getElementById('finalPriceBox').style.display = 'none';
        document.getElementById('selectionWarning').textContent = "Please enter dimensions/quantity or select all options above to see the final price.";
        document.getElementById('selectionWarning').classList.remove('alert-danger');
        document.getElementById('selectionWarning').classList.add('alert-info');
        document.getElementById('selectionWarning').style.display = 'block';


        // ðŸ›‘ CORE LOGIC: Area-Based vs. Standard ðŸ›‘

        if (currentProduct.isAreaBased) {
            // --- AREA-BASED SETUP (Panaflex/Wallpaper) ---
            areaInputs.style.display = 'block';
            standardOptions.style.display = 'none';
            
            // Reset inputs and warnings
            document.getElementById('input-width').value = '';
            document.getElementById('input-height').value = '';
            document.getElementById('input-custom-qty').value = 1;
            document.getElementById('areaDisplay').textContent = '';
            document.getElementById('areaConstraintWarning').style.display = 'none';
            document.getElementById('designFeeDisplay').textContent = 'Design Fee: Calculating...';
            document.getElementById('designFeeDisplay').classList.remove('alert-danger');
            document.getElementById('designFeeDisplay').classList.add('alert-warning');
            
            updateFinalPrice();

        } else {
            // --- STANDARD TIERED ITEM SETUP ---
            areaInputs.style.display = 'none';
            standardOptions.style.display = 'block';
            standardOptions.innerHTML = ''; 

            const allAttributes = currentProduct.combinations.map(c => c.attributes || c);
            const attributeKeys = Object.keys(allAttributes[0] || {}).filter(key => key !== 'Price' && key !== 'FullName' && allAttributes.some(a => a[key] !== 'Area Rate'));

            const availableAttributes = {};
            attributeKeys.forEach(key => availableAttributes[key] = new Set());

            allAttributes.forEach(c => {
                attributeKeys.forEach(key => {
                    if (c[key] && c[key] !== 'Area Rate') availableAttributes[key].add(c[key]);
                });
            });
            
            // Render groups of unique values for each attribute
            Object.keys(availableAttributes).forEach((attrKey, groupIndex) => {
                const uniqueValues = Array.from(availableAttributes[attrKey]);
                const sanitizedKey = attrKey.replace(/\s|\//g, '');
                
                let groupHTML = `
                    <div class="product-option-group" data-option-key="${sanitizedKey}">
                        <label>${attrKey}:</label>
                        <div class="d-flex flex-wrap gap-3" id="choices-${sanitizedKey}">
                `;
                
                uniqueValues.forEach(value => {
                    const inputId = `${sanitizedKey}-${value.replace(/\s|\/|\\|\(|\)/g, '-')}`;
                    
                    groupHTML += `
                        <label class="choice-card" for="${inputId}">
                            <input type="radio" id="${inputId}" name="option-${sanitizedKey}" value="${value}" 
                                   onchange="handleCardSelection('${sanitizedKey}', '${value}')">
                            <span class="label-text">${value}</span>
                        </label>
                    `;
                });

                groupHTML += `</div></div>`;
                standardOptions.innerHTML += groupHTML;
            });

            // Add quantity selector for standard items
            standardOptions.innerHTML += `
                 <div class="product-option-group" data-option-key="QuantitySelector">
                    <label>Quantity:</label>
                    <div class="input-group">
                        <button class="btn btn-outline-secondary" type="button" onclick="updateQuantityStandard(-1)">-</button>
                        <input type="number" id="input-standard-qty" min="1" value="1" class="form-control text-center" oninput="updateFinalPrice()">
                        <button class="btn btn-outline-secondary" type="button" onclick="updateQuantityStandard(1)">+</button>
                    </div>
                </div>
            `;
            
            document.getElementById('finalPriceBox').style.display = 'none';
            document.getElementById('selectionWarning').style.display = 'block';
        }

        showSection('product-detail');
    }

    // Helper for quantity buttons on standard items
    function updateQuantityStandard(change) {
        const input = document.getElementById('input-standard-qty');
        let quantity = parseInt(input.value) || 1;
        quantity = Math.max(1, quantity + change);
        input.value = quantity;
        updateFinalPrice();
    }
    
    // New handler function for card clicks (Standard Items)
    function handleCardSelection(key, value) {
        const sanitizedKey = key;
        
        currentSelectedVariations[sanitizedKey] = value;
        
        document.querySelectorAll(`input[name="option-${sanitizedKey}"]`).forEach(input => {
            input.closest('.choice-card').classList.remove('selected');
        });
        const selectedInput = document.querySelector(`input[name="option-${sanitizedKey}"][value="${value}"]`);
        if (selectedInput) {
            selectedInput.closest('.choice-card').classList.add('selected');
        }

        updateFinalPrice();
    }
    

    // --- Price Update and Calculation Logic (New Hybrid Logic) ---
    
    function getDesignFee(quantity) {
        if (quantity === 0) return 0;
        
        const tier = designTiers.find(t => quantity >= t.minQty && quantity <= t.maxQty);
        
        if (tier) return tier.designFee;
        
        const maxTier = designTiers.reduce((max, t) => t.maxQty > max.maxQty ? t : max, {maxQty: 0, designFee: 0});
        if (quantity > maxTier.maxQty) return maxTier.designFee;

        return 0;
    }

    function updateFinalPrice() {
        
        // 1. Handle Area-Based Products (Panaflex/Wallpaper)
        if (currentProduct && currentProduct.isAreaBased) {
            const width = parseFloat(document.getElementById('input-width').value) || 0;
            const height = parseFloat(document.getElementById('input-height').value) || 0;
            const quantity = parseInt(document.getElementById('input-custom-qty').value) || 0;

            const rateMeta = areaBasedMeta[currentProduct.baseName];
            const baseRate = rateMeta ? rateMeta.rate : 0;
            const minArea = rateMeta ? rateMeta.minArea : 0;
            
            document.getElementById('finalPriceBox').style.display = 'none';
            document.getElementById('areaConstraintWarning').style.display = 'none';
            document.getElementById('selectionWarning').style.display = 'block';
            document.getElementById('designFeeDisplay').classList.remove('alert-danger');
            document.getElementById('designFeeDisplay').classList.add('alert-warning');
            
            if (width <= 0 || height <= 0 || quantity <= 0) {
                document.getElementById('selectionWarning').textContent = "Please enter valid dimensions and quantity.";
                document.getElementById('areaDisplay').textContent = '';
                document.getElementById('designFeeDisplay').textContent = '';
                return;
            }

            const itemArea = width * height;
            const totalArea = itemArea * quantity;
            document.getElementById('areaDisplay').textContent = `Area per piece: ${itemArea.toFixed(2)} sq ft | Total Area: ${totalArea.toFixed(2)} sq ft`;

            if (currentProduct.baseName === '3D Wallpaper' && quantity === 1 && itemArea < minArea) {
                document.getElementById('areaConstraintWarning').textContent = `Minimum order area for a single wall is ${minArea} sq ft. Current size (${itemArea.toFixed(2)} sq ft) is too small. Contact customer support for custom quote.`;
                document.getElementById('areaConstraintWarning').style.display = 'block';
                document.getElementById('designFeeDisplay').textContent = 'Design Fee: Cannot calculate due to area constraint.';
                return; 
            }
            
            const baseCost = totalArea * baseRate;
            let designFee = getDesignFee(quantity);
            
            if (designFee > 0) {
                document.getElementById('designFeeDisplay').textContent = `Design Charge (Tiered Flat Fee): + PKR ${designFee.toLocaleString('en-PK')}`;
            } else {
                 document.getElementById('designFeeDisplay').textContent = 'Design Fee: (Contact support for custom quote)';
                 document.getElementById('designFeeDisplay').classList.remove('alert-warning');
                 document.getElementById('designFeeDisplay').classList.add('alert-danger');
            }

            const totalPrice = baseCost + designFee;
            
            document.getElementById('finalPriceDisplay').textContent = `PKR ${totalPrice.toLocaleString('en-PK', { minimumFractionDigits: 0 })}`;
            document.getElementById('finalPriceBox').style.display = 'block';
            document.getElementById('selectionWarning').style.display = 'none';

            return; 
        } 
        
        // 2. Standard Tiered Products (Find price based on card selections)
        
        const quantity = parseInt(document.getElementById('input-standard-qty')?.value) || 1;
        const allAttributes = currentProduct?.combinations.map(c => c.attributes || c);
        
        if (!allAttributes || allAttributes.length === 0) return;

        const requiredKeys = Object.keys(allAttributes[0]).filter(key => key !== 'Price' && key !== 'FullName' && key !== 'Type/Model');
        
        let selectedAttributes = {};
        let allSelected = true;

        requiredKeys.forEach(key => {
            const sanitizedKey = key.replace(/\s|\//g, '');
            if (!currentSelectedVariations[sanitizedKey]) {
                allSelected = false;
            } else {
                selectedAttributes[key] = currentSelectedVariations[sanitizedKey];
            }
        });

        if (!allSelected) {
            document.getElementById('finalPriceBox').style.display = 'none';
            document.getElementById('selectionWarning').textContent = "Please select all required options.";
            document.getElementById('selectionWarning').style.display = 'block';
            return;
        }

        // B. Find matching combination price
        let finalProductCombination = null;
        currentProduct.combinations.forEach(combo => {
            let matches = true;
            requiredKeys.forEach(key => {
                if (combo[key] !== selectedAttributes[key]) {
                    matches = false;
                }
            });
            if (matches) {
                finalProductCombination = combo;
            }
        });
        
        // C. Calculate and Display
        if (finalProductCombination) {
            const unitPrice = finalProductCombination.Price;
            const totalPrice = unitPrice * quantity;
            
            document.getElementById('finalPriceDisplay').textContent = `PKR ${totalPrice.toLocaleString('en-PK', { minimumFractionDigits: 0 })}`;
            document.getElementById('finalPriceBox').style.display = 'block';
            document.getElementById('selectionWarning').style.display = 'none';

        } else {
            document.getElementById('selectionWarning').textContent = "Selected combination not available. Try another mix.";
            document.getElementById('selectionWarning').classList.remove('alert-info');
            document.getElementById('selectionWarning').classList.add('alert-danger');
            document.getElementById('finalPriceBox').style.display = 'none';
            document.getElementById('selectionWarning').style.display = 'block';
        }
    }


    // --- Add to Cart Logic (WhatsApp Routing) ---

    function addToCartFromDetails() {
        const finalPriceText = document.getElementById('finalPriceDisplay').textContent;
        const totalPrice = parseFloat(finalPriceText.replace('PKR', '').replace(/,/g, '').trim()) || 0;
        
        if (totalPrice === 0 || document.getElementById('finalPriceBox').style.display === 'none') {
             showAlert('Please configure the product to see the final price before ordering.', 'error');
             return;
        }

        let itemDetails = '';
        
        if (currentProduct.isAreaBased) {
            const width = parseFloat(document.getElementById('input-width').value) || 0;
            const height = parseFloat(document.getElementById('input-height').value) || 0;
            const quantity = parseInt(document.getElementById('input-custom-qty').value) || 0;
            const totalArea = (width * height) * quantity;
            const designFeeDisplay = document.getElementById('designFeeDisplay').textContent;

            itemDetails = `\n*Product:* ${currentProduct.baseName} (Area-Based)\n*Dimensions:* ${width}ft x ${height}ft\n*Quantity:* ${quantity} piece(s)\n*Total Area:* ${totalArea.toFixed(2)} sq ft\n*Price:* ${finalPriceText} (Includes Design Fee: ${designFeeDisplay.split('+')[1]?.trim() || 'N/A'})`;
            
        } else {
            const quantity = parseInt(document.getElementById('input-standard-qty').value) || 1;
            const details = Object.entries(currentSelectedVariations)
                .map(([key, val]) => `\n- ${key.replace(/[A-Z]/g, ' $&').trim()}: ${val}`);
            
            itemDetails = `\n*Product:* ${currentProduct.baseName} (Standard)\n*Selections:*${details.join('')}\n*Quantity:* ${quantity} unit(s)\n*Total Price:* ${finalPriceText}`;
        }
        
        submitOrderViaWhatsApp(itemDetails, totalPrice);
    }
    
    
    // --- WhatsApp Submission Handlers ---

    // 1. General Order Submission (from product page)
    function submitOrderViaWhatsApp(itemDetails, totalPrice) {
        
        let message = `*NEW ARHAM PRINTERS ORDER REQUEST (WEB)*\n`;
        message += `-------------------------------------------\n`;
        message += `${itemDetails}\n`;
        message += `-------------------------------------------\n`;
        message += `*CONFIRMED TOTAL:* ${document.getElementById('finalPriceDisplay').textContent}\n\n`;
        message += `_Please confirm this order, dimensions, and arrange final payment._\n\n`;
        message += `Customer is waiting for contact.`;


        const whatsappLink = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;
        window.open(whatsappLink, '_blank');
        
        showAlert('Opening WhatsApp chat now. Your order details have been prepared!', 'success');
        
        setTimeout(() => {
             showSection('home');
        }, 1500);
    }
    
    // 2. Contact Form Submission Handler
    function handleContactSubmission(e) {
        e.preventDefault();
        
        const name = document.getElementById('contact-name').value;
        const subject = document.getElementById('contact-subject').value;
        const message = document.getElementById('contact-message').value;

        let whatsappMessage = `*NEW CONTACT MESSAGE (WEB)*\n`;
        whatsappMessage += `*Sender:* ${name}\n`;
        whatsappMessage += `*Subject:* ${subject}\n`;
        whatsappMessage += `*Message:* ${message}`;
        
        window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(whatsappMessage)}`, '_blank');

        showAlert('Message sent via WhatsApp!', 'success');
        document.getElementById('contact-form-whatsapp').reset();
    }
    
    // 3. Get A Quote Submission Handler
    function handleQuoteSubmission(e) {
        e.preventDefault();
        
        const name = document.getElementById('quote-name').value;
        const phone = document.getElementById('quote-phone').value;
        const product = document.getElementById('quote-product').value;
        const quantity = document.getElementById('quote-quantity').value;
        const details = document.getElementById('quote-details').value;
        
        let whatsappMessage = `*NEW QUOTE REQUEST (WEB)*\n`;
        whatsappMessage += `*Customer:* ${name}\n`;
        whatsappMessage += `*Phone (Contact):* ${phone}\n`;
        whatsappMessage += `*Product Type:* ${product}\n`;
        whatsappMessage += `*Quantity/Area:* ${quantity}\n`;
        whatsappMessage += `*Specifications:* ${details}`;
        
        window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(whatsappMessage)}`, '_blank');

        showAlert('Quote submitted via WhatsApp! We will contact you shortly.', 'success');
        document.getElementById('quote-form').reset();
    }

    // 4. Print Service Submission Handler (NEW)
    function handlePrintServiceSubmission(e) {
        e.preventDefault();
        
        const files = document.getElementById('print-file-upload').files;
        const numFiles = files.length;
        const fileNames = Array.from(files).map(f => f.name).join(', ');
        
        const size = document.querySelector('input[name="print-size"]:checked')?.value || 'N/A';
        const color = document.querySelector('input[name="print-color"]:checked')?.value || 'N/A';
        const sides = document.querySelector('input[name="print-side"]:checked')?.value || 'N/A';
        const binding = document.getElementById('binding-type').value;
        const laminate = document.getElementById('laminate-type').value;

        const customerName = document.getElementById('print-customer-name').value;
        const customerPhone = document.getElementById('print-customer-phone').value;
        const notes = document.getElementById('print-notes').value;

        let whatsappMessage = `*NEW DOCUMENT PRINT ORDER (WEB)*\n`;
        whatsappMessage += `*Customer:* ${customerName}\n`;
        whatsappMessage += `*Phone:* ${customerPhone}\n`;
        whatsappMessage += `*--- Print Specs ---*\n`;
        whatsappMessage += `*Files:* ${numFiles} file(s) - Please send files immediately.\n`;
        whatsappMessage += `*Size:* ${size}\n`;
        whatsappMessage += `*Color:* ${color}\n`;
        whatsappMessage += `*Sides:* ${sides}\n`;
        whatsappMessage += `*Finish:* Binding (${binding}), Cover (${laminate})\n`;
        whatsappMessage += `*Notes:* ${notes || 'None'}\n\n`;
        whatsappMessage += `_Please manually calculate final price based on specs and contact customer to receive files._`;

        window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(whatsappMessage)}`, '_blank');
        showAlert('Print Order details sent. Please send your files via WhatsApp now!', 'success');
        document.getElementById('quick-print-form').reset();
    }
    
    // Update the list of files in the Print Document section
    document.getElementById('print-file-upload').addEventListener('change', function() {
        const container = document.getElementById('file-list-summary');
        container.innerHTML = '';
        const files = this.files;
        if (files.length === 0) {
            container.innerHTML = '<li class="text-muted">No files selected.</li>';
            return;
        }
        
        for (let i = 0; i < files.length; i++) {
            container.innerHTML += `<li><i class="fas fa-check-circle text-success me-2"></i> ${files[i].name} (${(files[i].size / 1024 / 1024).toFixed(2)} MB)</li>`;
        }
    });


    // --- UI/Navigation Functions ---
    
    function showSection(sectionName) {
        document.querySelectorAll('.section').forEach(section => {
            section.classList.remove('active');
        });
        
        document.getElementById(sectionName + '-section').classList.add('active');
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
        });
        
        window.scrollTo(0, 0);
        
        if (sectionName === 'home') {
             const homeLink = document.querySelector('.nav-item.nav-link[href="#home-section"]');
             if (homeLink) homeLink.classList.add('active');
        } else {
             document.querySelector(`.nav-item.nav-link[onclick="showSection('${sectionName}')"]`)?.classList.add('active');
        }
    }
    
    function showAlert(message, type) {
        const alert = document.createElement('div');
        alert.className = `alert alert-${type === 'error' ? 'danger' : type} alert-dismissible fade show position-fixed`;
        alert.style.top = '20px';
        alert.right = '20px';
        alert.style.zIndex = '9999';
        alert.style.minWidth = '300px';
        alert.innerHTML = `
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        document.body.appendChild(alert);
        
        setTimeout(() => {
            if (alert.parentNode) {
                alert.parentNode.removeChild(alert);
            }
        }, 5000);
    }
    
    document.addEventListener('DOMContentLoaded', initialAppLoad);
</script>
</body>

</html>
