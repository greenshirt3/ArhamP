<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Arham Printers - Printing and Advertising Service</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Printing Services, Business Cards, Stationery, Marketing Materials" name="keywords">
    <meta content="Professional printing services in Pakistan for business cards, brochures, flyers, and more." name="description">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    
    <style>
               /* General Layout and Utility Styles */
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .final-price-box {
            background: var(--bs-primary);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            text-align: center;
            display: none; 
        }
        .final-price-box h4 {
            color: white;
        }

        /* Clickable Card Variations (Standard Items) */
        .choice-card {
            cursor: pointer;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px 15px;
            text-align: center;
            transition: all 0.2s ease;
            flex-grow: 1;
            min-width: 120px;
        }
        .choice-card:hover {
            border-color: var(--bs-secondary);
            background-color: #fff8f8;
        }
        .choice-card.selected {
            border-color: var(--bs-primary);
            background-color: var(--bs-primary);
            color: white;
            box-shadow: 0 0 10px rgba(242, 139, 0, 0.3);
        }
        .choice-card input[type="radio"] {
            display: none;
        }
        .choice-card .label-text {
            font-weight: 500;
            color: var(--bs-dark);
            display: block;
        }
        .choice-card.selected .label-text {
            color: white;
        }
        .product-option-group {
            margin-bottom: 1.5rem;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .product-option-group label {
            font-weight: 600;
            color: var(--bs-dark);
            margin-bottom: 0.75rem;
            display: block;
            font-size: 1.1rem;
        }
    </style>
</head>

<body>
    <!-- Spinner Start -->
     <div class="container">
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->

    <!-- Topbar Start -->
    <div class="container-fluid bg-dark text-white-50 py-2 px-0 d-none d-lg-block">
        <div class="row gx-0 align-items-center">
            <div class="col-lg-7 px-5 text-start">
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <small class="fa fa-phone-alt me-2"></small>
                    <small>+92-53-3592431</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <small class="far fa-envelope-open me-2"></small>
                    <small>info@arhamprinters.pk</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <small class="far fa-clock me-2"></small>
                    <small>Mon - Fri : 09 AM - 09 PM</small>
                </div>
            </div>
            <div class="col-lg-5 px-5 text-end">
                <div class="h-100 d-inline-flex align-items-center">
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-facebook-f"></i></a>
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-twitter"></i></a>
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-linkedin-in"></i></a>
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar End -->

    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-white navbar-light sticky-top px-4 px-lg-5">
        <a href="#home-section" class="navbar-brand d-flex align-items-center" onclick="showSection('home')">
            <h1 class="m-0 text-primary"><i class="fa fa-print me-3"></i>Arham Printers</h1>
        </a>
        <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav mx-auto bg-light pe-4 py-3 py-lg-0">
                <a href="#home-section" class="nav-item nav-link active" onclick="showSection('home')">Home</a>
                <a href="products.html" class="nav-item nav-link">Products</a>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Shop</a>
                    <div class="dropdown-menu bg-light border-0 m-0">
                         <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Business Essentials')">Business Essentials</a>
                         <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Marketing Essentials')">Marketing Essentials</a>
                         <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Office Essentials')">Office Essentials</a>
<a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Wedding Invitation Cards')">Wedding Invitation Cards</a>
 <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Digital Printing')">Panaflex Printing</a>
<a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Photo Printing')">Photo Printing</a>
 <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('3D Wallpaper')">3D Wallpaper</a>
 <a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Promotional Items')">Promotional Items</a>
<a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Shields')">Shields</a>
<a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Souvenirs')">Souvenirs</a>
<a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Flags and Fabric')">Flags and Fabric</a>
<a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Box Packaging')">Box Packaging</a>
<a href="#shop-catalog" class="dropdown-item" onclick="filterCatalog('Marketing and Advertising')">Marketing and Advertising</a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item" onclick="showSection('quote')">Get Custom Quote</a>
                    </div>
                </div>
                <a href="#" class="nav-item nav-link" onclick="showSection('contact')">Contact</a>
            </div>
            <div class="h-100 d-lg-inline-flex align-items-center">
                <!-- Shopping bag icon now serves as the WhatsApp Order trigger -->
                <a class="btn-sm-square bg-white text-primary rounded-circle me-4 position-relative" href="#" onclick="showSection('quote')">
                    <i class="fas fa-file-invoice"></i>
                </a>
                <a href="#" class="btn btn-primary py-2 px-3 rounded-0 d-none d-lg-block" onclick="showSection('contact')">Get a Quote<i
                        class="fa fa-arrow-right ms-3"></i></a>
            </div>
        </div>
    </nav>
    <!-- Navbar End -->

    <!-- Home Section Start (Hero + Catalog) -->
    <section id="home-section" class="section active">
        <!-- Hero Header Start -->
        <div class="container-fluid hero-header bg-light py-5">
            <div class="container py-5">
                <div class="row g-5 align-items-center">
                    <div class="col-lg-6">
                        <h1 class="display-4 mb-3 animated slideInDown">The Future of <span class="text-primary">Printing</span> is Here</h1>
                        <p class="animated slideInDown">Experience professional quality and stunning designs for all your business needsâ€”from letterheads to marketing materials. Arham Printers delivers excellence.</p>
                        <a href="#shop-catalog" class="btn btn-primary py-3 px-5 animated slideInDown" onclick="showSection('home')">Explore Products</a>
                    </div>
                    <div class="col-lg-6 animated fadeIn">
                        <div class="owl-carousel header-carousel">
                            <div class="owl-carousel-item">
                                <img class="img-fluid" src="img/carousel-1.png" alt="Printing Services">
                            </div>
                            <div class="owl-carousel-item">
                                <img class="img-fluid" src="img/carousel-2.png" alt="Business Printing">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
<div class="container-fluid services-categories py-5" id="services-categories">
            <div class="container py-5">
                <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 600px;">
                    <h1 class="display-5 mb-3">Our Printing Services & Product Categories</h1>
                    <p class="mb-0">Explore our full range of professional printing and advertising solutions.</p>
                </div>
                <div class="row g-4 justify-content-center" id="index-categories-list">
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.1s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Business Essentials'">
                            <div class="card-body">
                                <i class="fas fa-briefcase fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Business Essentials</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.1s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Marketing Essentials'">
                            <div class="card-body">
                                <i class="fas fa-bullhorn fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Marketing Essentials</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.1s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Office Essentials'">
                            <div class="card-body">
                                <i class="fas fa-print fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Office Essentials</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.1s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Wedding Invitation Cards'">
                            <div class="card-body">
                                <i class="fas fa-print fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Wedding Invitation Cards</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.3s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Panaflex Printing'">
                            <div class="card-body">
                                <i class="fas fa-print fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Panaflex Printing</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.3s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Photo Printing'">
                            <div class="card-body">
                                <i class="fas fa-print fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Photo Printing</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.3s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=3D Wallpaper'">
                            <div class="card-body">
                                <i class="fas fa-print fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">3D Wallpaper</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.3s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Promotional Items'">
                            <div class="card-body">
                                <i class="fas fa-print fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Promotional Items</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.5s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Shields'">
                            <div class="card-body">
                                <i class="fas fa-print fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Shields</h5>
                            </div>
                        </div>
                    </div>
                     <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.5s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Souvenirs'">
                            <div class="card-body">
                                <i class="fas fa-print fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Souvenirs</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.5s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Flags and Fabric'">
                            <div class="card-body">
                                <i class="fas fa-print fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Flags and Fabric</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.5s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Box Packaging'">
                            <div class="card-body">
                                <i class="fas fa-print fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Box Packaging</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6 wow fadeInUp" data-wow-delay="0.5s">
                         <div class="card h-100 shadow-sm category-card text-center" style="cursor: pointer;" onclick="window.location.href='/products.html?category=Marketing and Advertising'">
                            <div class="card-body">
                                <i class="fas fa-print fa-3x text-primary mb-3"></i>
                                <h5 class="card-title mb-0">Marketing and Advertising</h5>
                            </div>
                        </div>
                    </div>

                    </div>
            </div>
        </div>
        
    <!-- Product Detail Section Start (New Separate Page) -->
    <section id="product-detail-section" class="section">
        <div class="container-fluid page-header py-5">
            <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s" id="detail-product-name-header">Product Details</h1>
            <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
                <li class="breadcrumb-item"><a href="#" onclick="showSection('home')">Home</a></li>
                <li class="breadcrumb-item active text-white">Details</li>
            </ol>
        </div>

        <div class="container-fluid py-5">
            <div class="container py-5">
                <div class="row g-5">
                    <!-- Product Image -->
                    <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
                        <div class="d-flex justify-content-center">
                            <img id="detail-product-image" src="img/placeholder.jpg" class="img-fluid rounded" alt="Product Image" style="max-height: 400px;">
                        </div>
                    </div>
                    
                    <!-- Product Options and Price -->
                    <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.3s">
                        <h2 class="fw-bold mb-4" id="detail-product-name-body">Product Name</h2>
                        
                        <!-- Custom Area Inputs (Panaflex/Wallpaper) -->
                        <div id="custom-area-inputs" style="display: none;">
                            <div class="product-option-group" data-option-key="Dimensions">
                                <label>Wall/Piece Dimensions (Feet):</label>
                                <div class="d-flex gap-3">
                                    <input type="number" id="input-width" min="1" placeholder="Width" class="form-control" oninput="updateFinalPrice()">
                                    <span class="align-self-center">x</span>
                                    <input type="number" id="input-height" min="1" placeholder="Height" class="form-control" oninput="updateFinalPrice()">
                                </div>
                                <small class="text-muted mt-2 d-block" id="areaDisplay"></small>
                            </div>
                            
                            <div class="product-option-group" data-option-key="Quantity">
                                <label>Number of Pieces/Walls:</label>
                                <input type="number" id="input-custom-qty" min="1" value="1" class="form-control" oninput="updateFinalPrice()">
                            </div>
                            
                            <div class="alert alert-warning mt-3" id="designFeeDisplay"></div>
                            <div class="alert alert-danger mt-3" id="areaConstraintWarning" style="display: none;"></div>
                        </div>

                        <!-- Standard Selector Fields (For regular tiered items) -->
                        <div id="standard-options-fields">
                            <!-- Dynamic Options (Clickable Cards) will be loaded here for non-area items -->
                        </div>

                        <!-- Final Price Box (Visible after validation) -->
                        <div class="final-price-box" id="finalPriceBox">
                            <h4 class="mb-2">Final Price</h4>
                            <h3 class="display-6 fw-bold" id="finalPriceDisplay">PKR 0</h3>
                            
                            <!-- Add to Cart button now triggers WhatsApp submission -->
                            <button class="btn btn-secondary py-2 px-4 w-100 mt-3" onclick="addToCartFromDetails()">
                                <i class="fab fa-whatsapp me-2"></i> Place Order via WhatsApp
                            </button>
                        </div>
                        
                        <div class="alert alert-info mt-3" id="selectionWarning" style="display: block;">
                            Please enter dimensions/quantity or select all options above to see the final price.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Product Detail Section End -->
    
    <!-- Custom Quote Section Start -->
    <section id="quote-section" class="section">
        <div class="container-fluid page-header py-5">
            <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s">Get a Custom Quote</h1>
            <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
                <li class="breadcrumb-item"><a href="#" onclick="showSection('home')">Home</a></li>
                <li class="breadcrumb-item active text-white">Quote</li>
            </ol>
        </div>

        <div class="container-fluid py-5">
            <div class="container py-5">
                <div class="row g-4 justify-content-center">
                    <div class="col-lg-8">
                        <div class="bg-light p-4 rounded">
                            <form id="quote-form" onsubmit="handleQuoteSubmission(event)">
                                <h3 class="mb-4">Quick Inquiry</h3>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="quote-name" placeholder="Your Name" required>
                                            <label for="quote-name">Your Name</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="tel" class="form-control border-0" id="quote-phone" placeholder="WhatsApp Phone" required>
                                            <label for="quote-phone">WhatsApp Phone</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="quote-product" placeholder="Product Name (e.g., Visiting Cards, 3D Wallpaper)">
                                            <label for="quote-product">Product Name / Type</label>
                                        </div>
                                    </div>
                                     <div class="col-12">
                                        <div class="form-floating">
                                            <input type="number" class="form-control border-0" id="quote-quantity" placeholder="Quantity or Total Area (e.g., 500 cards, 100 sq ft)">
                                            <label for="quote-quantity">Quantity / Estimated Area</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <textarea class="form-control border-0" placeholder="Details of your inquiry (Size, Finish, Quality, Message)" id="quote-details" style="height: 150px" required></textarea>
                                            <label for="quote-details">Inquiry Message / Specifications</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <button class="btn btn-primary w-100 py-3" type="submit">Submit Quote via WhatsApp</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Custom Quote Section End -->


    <!-- Contact Section Start -->
    <section id="contact-section" class="section">
        <div class="container-fluid page-header py-5">
            <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s">Contact Us</h1>
            <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
                <li class="breadcrumb-item"><a href="#" onclick="showSection('home')">Home</a></li>
                <li class="breadcrumb-item active text-white">Contact</li>
            </ol>
        </div>

        <div class="container-fluid py-5">
            <div class="container py-5">
                <div class="row g-4">
                    <div class="col-lg-4 wow fadeInUp" data-wow-delay="0.1s">
                        <div class="bg-light p-4 rounded">
                            <div class="d-flex align-items-center mb-4">
                                <div class="d-flex align-items-center justify-content-center border border-primary rounded-circle mb-3"
                                    style="width: 60px; height: 60px;">
                                    <i class="fa fa-map-marker-alt text-primary fs-4"></i>
                                </div>
                                <div class="ms-4">
                                    <h5 class="mb-2">Our Location</h5>
                                    <p class="mb-0">Domela Chowk,Tanda Road, Jalalpur Jattan</p>
                                </div>
                            </div>
                            
                            <div class="d-flex align-items-center mb-4">
                                <div class="d-flex align-items-center justify-content-center border border-primary rounded-circle mb-3"
                                    style="width: 60px; height: 60px;">
                                    <i class="fa fa-phone-alt text-primary fs-4"></i>
                                </div>
                                <div class="ms-4">
                                    <h5 class="mb-2">Call Us</h5>
                                    <p class="mb-0">+92 300 6238233</p>
                                </div>
                            </div>
                            
                            <div class="d-flex align-items-center">
                                <div class="d-flex align-items-center justify-content-center border border-primary rounded-circle mb-3"
                                    style="width: 60px; height: 60px;">
                                    <i class="fa fa-envelope text-primary fs-4"></i>
                                </div>
                                <div class="ms-4">
                                    <h5 class="mb-2">Email Us</h5>
                                    <p class="mb-0">info@arhamprinters.pk</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-8 wow fadeInUp" data-wow-delay="0.3s">
                        <div class="bg-light p-4 rounded">
                            <!-- Submission for Contact is routed to WhatsApp -->
                           <form id="contact-form-whatsapp" onsubmit="handleContactSubmission(event)">
                                <h3 class="mb-4">Send a Direct Message</h3>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="contact-name" placeholder="Your Name" required>
                                            <label for="contact-name">Your Name</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="contact-subject" placeholder="Subject" required>
                                            <label for="contact-subject">Subject</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <textarea class="form-control border-0" placeholder="Leave a message here" id="contact-message" style="height: 150px" required></textarea>
                                            <label for="contact-message">Message</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <button class="btn btn-primary w-100 py-3" type="submit">Send Message via WhatsApp</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
  <section id="print-service-card" style="background-color: #ffc107; padding: 40px 20px; margin-bottom: 30px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
  <div style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; align-items: center;">
    
    <!-- Column 1: Image -->
    <div style="flex: 1 1 300px; text-align: center;">
      <img src="img/print ad.jpg" alt="Print Sample 1" style="width: 100%; max-width: 300px; aspect-ratio: 1 / 1; object-fit: cover; border-radius: 8px;">
    </div>

  <!-- Text and Button Section -->
  <div style="text-align: center; margin-top: 30px;">
    <h2 style="color: #dc3545; font-size: 1.8em; margin-bottom: 10px;">ðŸ“„ Need Prints? Fast & Professional.</h2>
    <p style="font-size: 1.1em; margin-bottom: 25px;">Upload your documents, reports, and photos for custom printing. Secure, easy, and delivered fast.</p>
    <a href="/print-order.html" class="print-button"
       style="background-color: #007bff; color: white; padding: 15px 40px; text-decoration: none; font-weight: bold; font-size: 1.2em; border-radius: 5px; display: inline-block; transition: background-color 0.3s;">Print Your Documents and Photos with Doorstep Delivery for Jalalpur Jattan and Surroundings.
    </a>
  </div>
</section>
    <!-- Footer Start -->
       <div class="container-fluid footer py-4 wow fadeIn" data-wow-delay="0.2s">
        <div class="container py-4">
            <div class="row g-4">
                <!-- Contact Details -->
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fas fa-map-marker-alt fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Address</h4>
                            <p class="mb-2">Domela Chowk,Tanda Road, Jalalpur Jattan</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fas fa-envelope fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Mail Us</h4>
                            <p class="mb-2">info@arhamprinters.pk</p>
                        </div>
                    </div>
                </div>

                <!-- Direct WhatsApp Contact (Replaced Quick Links) -->
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <a href="https://wa.me/923006238233" target="_blank" class="text-decoration-none">
                            <div class="rounded-circle bg-success d-flex align-items-center justify-content-center mb-4"
                                style="width: 70px; height: 70px;">
                                <i class="fab fa-whatsapp fa-2x text-white"></i>
                            </div>
                        </a>
                        <div>
                            <h4 class="text-white">Direct Contact</h4>
                            <a href="https://wa.me/923006238233" target="_blank" class="text-white-50 text-decoration-none">
                                <p class="mb-2">+92 300 6238233</p>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Social Links -->
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fab fa-facebook-f fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Follow Us</h4>
                            <div class="d-flex pt-2">
                                <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i
                                        class="fab fa-twitter"></i></a>
                                <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i
                                        class="fab fa-facebook-f"></i></a>
                                <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i
                                        class="fab fa-youtube"></i></a>
                                <a class="btn btn-square btn-outline-light rounded-circle me-0" href=""><i
                                        class="fab fa-linkedin-in"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <!-- Copyright -->
    <div class="container-fluid copyright">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-3 mb-md-0">
                    <span class="text-white">
                            <i class="fas fa-copyright text-light me-2"></i>
                            2025 Arham Printers
                        </a>, All rights reserved.
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
    <!-- Footer End -->


    <a href="#" class="btn btn-primary btn-lg-square back-to-top"><i class="fa fa-arrow-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>

    <!-- Custom Script Block (V5.0 - Hybrid Pricing and WhatsApp Integration) -->
    <script>
    // --- Configuration ---
    const PUBLIC_DATA_URL = 'customer-data.json'; 
    const WHATSAPP_NUMBER = '923006238233'; // Your WhatsApp Number (No plus or spaces for URL API)
    
    let allProducts = {}; 
    let currentProduct = null; 

    // Global stores for pricing logic
    let allProductGroups = {};
    let currentSelectedVariations = {}; 
    let designTiers = []; 
    let areaBasedMeta = {}; 

    // --- Core Functions ---

    async function initialAppLoad() {
        let rawData;
        try {
            const response = await fetch(PUBLIC_DATA_URL);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            rawData = await response.json();
        } catch (error) {
            console.error("Failed to load shop data:", error);
            showAlert("Failed to load product data. Check the developer console.", 'error');
            return;
        }
        
        const productGroups = initialProductSetup(rawData);
        renderMainCatalog(productGroups);
        
        // Populate sidebar categories for filtering
        populateSidebarCategories();
        
        if (typeof WOW !== 'undefined') { new WOW().init(); }
        
        document.getElementById('home-section').classList.add('active');

        // Set up form submission handlers for WhatsApp routing
        document.getElementById('quote-form').addEventListener('submit', handleQuoteSubmission);
        document.getElementById('contact-form-whatsapp').addEventListener('submit', handleContactSubmission);
    }
    
    // Function to populate the sidebar with the new main categories
    function populateSidebarCategories() {
        const container = document.getElementById('productCategoriesList');
        container.innerHTML = '';
        
        const categoriesSet = new Set();
        Object.values(allProductGroups).forEach(group => {
            if (group.mainCategory && group.mainCategory !== "System Data") {
                categoriesSet.add(group.mainCategory);
            }
        });

        Array.from(categoriesSet).sort().forEach(category => {
            container.innerHTML += `
                <li>
                    <div class="categories-item">
                        <a href="#shop-catalog" class="text-dark" onclick="event.preventDefault(); filterCatalog('${category}')">
                            <i class="fas fa-tags text-primary me-2"></i> ${category}
                        </a>
                    </div>
                </li>
            `;
        });
    }

    // Helper function to smartly parse the flat item name into attributes
    function parseAttributes(baseName, fullName) {
        let attributes = {
            'Price': allProducts[fullName].price,
            'FullName': fullName
        };

        const cleanName = fullName.replace(baseName, '').trim();

        if (baseName === 'LetterPads' || baseName === 'Ishtihar' || baseName === 'Pamphlet/Menu') {
            const qualityMatch = cleanName.match(/(\d+g)/);
            const sizeMatch = cleanName.match(/(A4\/2|A4|\d+x\d+)/);
            const colorMatch = cleanName.match(/(\d+ Color|Single Color|Black)/);

            attributes['Paper Quality'] = qualityMatch ? qualityMatch[0] : 'Standard';
            attributes['Paper Size'] = sizeMatch ? sizeMatch[0] : 'Standard';
            attributes['Printing Color'] = colorMatch ? colorMatch[0] : 'Standard';
            
        } else if (baseName === 'Visiting Cards') {
            const parts = cleanName.split(' ');
            attributes['Stock'] = parts[0] || 'Standard';
            attributes['Sides'] = parts[1] === 'Double' || parts[1] === 'Single' ? parts[1] : 'Single';
            attributes['Finish'] = parts.length > 2 ? parts.slice(2).join(' ') : 'None';

        } else {
            // Default for items like Mugs, Caps, etc.
            attributes['Type/Model'] = cleanName || fullName;
        }

        return attributes;
    }


    // Initial setup to categorize all product items and extract pricing metadata
    function initialProductSetup(rawData) {
        const productGroups = {};
        
        rawData.calculatorData.items.forEach(item => {
            const baseName = item.subcategory;
            const fullName = item.itemName;

            // 1. Capture Design Tiers and Area-Based Metadata
            if (baseName === "PanaflexDesignTiers" && item.tiers) {
                designTiers = item.tiers;
                return; 
            }
            if (item.isAreaBased) {
                areaBasedMeta[baseName] = { 
                    rate: item.price, 
                    minArea: item.minArea || 0 
                };
            }

            // 2. Map all items to a flattened allProducts (for cart lookups)
            allProducts[fullName] = {
                price: item.price,
                imageFile: `${baseName.replace(/\//g, '-')}.jpg` 
            };

            // 3. Group the data by base product (subcategory) for the catalog
            if (!productGroups[baseName]) {
                const mainCat = item.mainCategory || 'Uncategorized';

                productGroups[baseName] = {
                    baseName: baseName,
                    minPrice: item.price,
                    imageFile: `${baseName.replace(/\//g, '-')}.jpg`,
                    isAreaBased: item.isAreaBased || false,
                    mainCategory: mainCat,
                    combinations: [] 
                };
            }

            // Update minimum price
            if (item.price < productGroups[baseName].minPrice) {
                productGroups[baseName].minPrice = item.price;
            }

            // 4. Parse attributes for rendering standard variations
            const attributes = parseAttributes(baseName, fullName);

            productGroups[baseName].combinations.push(attributes);
            allProducts[fullName].attributes = attributes;
            allProducts[fullName].imageFile = productGroups[baseName].imageFile;
        });
        
        allProductGroups = productGroups;
        return productGroups;
    }


    // --- Render Simplified Main Catalog ---
    function renderMainCatalog(productGroups) {
        // Renders all products initially
        filterCatalog(null); 
    }

    // New function to filter the product catalog by the top-level mainCategory
    function filterCatalog(mainCategory = null) {
        showSection('home');
        const container = document.getElementById('main-product-catalog');
        let html = '';
        const productGroups = allProductGroups;
        
        const filteredKeys = Object.keys(productGroups).filter(key => {
            const product = productGroups[key];
            if (key === "PanaflexDesignTiers") return false;
            if (!mainCategory) return true; // Show all products
            return product.mainCategory === mainCategory;
        });

        if (filteredKeys.length === 0) {
            container.innerHTML = `<h3 class="text-center w-100 py-5">No products found in "${mainCategory || 'catalog'}".</h3>`;
            return;
        }
        
        const getMinPrice = (baseName) => {
            const group = allProductGroups[baseName];
            if (!group || group.combinations.length === 0) return 40; 
            if (group.isAreaBased && areaBasedMeta[baseName]) return areaBasedMeta[baseName].rate;
            return group.combinations.reduce((min, combo) => Math.min(min, combo.Price), Infinity);
        };

        filteredKeys.forEach(key => {
            const product = productGroups[key];
            const imagePath = `img/products/${product.imageFile}`;
            const displayPrice = getMinPrice(key);
            const pricePrefix = product.isAreaBased ? 'Rate/Sq Ft: PKR' : 'Starting from: PKR';
            const buttonText = product.isAreaBased ? 'Configure Area' : 'View Details';

            html += `
            <div class='col-md-4 col-sm-6 mb-4'>
                <div class='card h-100 shadow-sm'>
                    <img src='${imagePath}' onerror="this.onerror=null;this.src='img/products/${key.replace(/\//g, '-')}.png';" class='card-img-top' alt='${product.baseName}'>
                    <div class='card-body text-center'>
                        <h5 class='card-title'>${product.baseName}</h5>
                        <p class='mt-2 text-primary fw-bold'>${pricePrefix} ${displayPrice.toLocaleString('en-PK', { minimumFractionDigits: 0 })}</p>
                        <button class="btn btn-primary w-100 mt-2" onclick="showProductDetails('${product.baseName.replace(/\//g, '\\/')}')"><i class="fas fa-search me-2"></i> ${buttonText}</button>
                    </div>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
    }


    // 4. Navigate to and Populate Product Detail Page
    function showProductDetails(productName) {
        const name = productName.replace(/\\/g, ''); 
        const productData = allProductGroups[name];
        currentProduct = productData;
        currentSelectedVariations = {}; 

        if (!currentProduct) {
            showAlert(`Product "${name}" details not found.`, 'error');
            return;
        }

        // Update headers and image
        document.getElementById('detail-product-name-header').textContent = currentProduct.baseName;
        document.getElementById('detail-product-name-body').textContent = currentProduct.baseName;
        const imagePath = `img/products/${currentProduct.imageFile}`;
        document.getElementById('detail-product-image').src = imagePath;
        document.getElementById('detail-product-image').onerror = function() { 
             this.src = `img/products/${currentProduct.baseName.replace(/\//g, '-')}.png`; 
        };

        const areaInputs = document.getElementById('custom-area-inputs');
        const standardOptions = document.getElementById('standard-options-fields');
        
        document.getElementById('finalPriceBox').style.display = 'none';
        document.getElementById('selectionWarning').textContent = "Please enter dimensions/quantity or select all options above to see the final price.";
        document.getElementById('selectionWarning').classList.remove('alert-danger');
        document.getElementById('selectionWarning').classList.add('alert-info');
        document.getElementById('selectionWarning').style.display = 'block';


        // ðŸ›‘ CORE LOGIC: Area-Based vs. Standard ðŸ›‘

        if (currentProduct.isAreaBased) {
            // --- AREA-BASED SETUP (Panaflex/Wallpaper) ---
            areaInputs.style.display = 'block';
            standardOptions.style.display = 'none';
            
            // Reset inputs and warnings
            document.getElementById('input-width').value = '';
            document.getElementById('input-height').value = '';
            document.getElementById('input-custom-qty').value = 1;
            document.getElementById('areaDisplay').textContent = '';
            document.getElementById('areaConstraintWarning').style.display = 'none';
            document.getElementById('designFeeDisplay').textContent = 'Design Fee: Calculating...';
            document.getElementById('designFeeDisplay').classList.remove('alert-danger');
            document.getElementById('designFeeDisplay').classList.add('alert-warning');
            
            updateFinalPrice();

        } else {
            // --- STANDARD TIERED ITEM SETUP ---
            areaInputs.style.display = 'none';
            standardOptions.style.display = 'block';
            standardOptions.innerHTML = ''; 

            const allAttributes = currentProduct.combinations.map(c => c.attributes || c);
            const attributeKeys = Object.keys(allAttributes[0] || {}).filter(key => key !== 'Price' && key !== 'FullName' && allAttributes.some(a => a[key] !== 'Area Rate'));

            const availableAttributes = {};
            attributeKeys.forEach(key => availableAttributes[key] = new Set());

            allAttributes.forEach(c => {
                attributeKeys.forEach(key => {
                    if (c[key] && c[key] !== 'Area Rate') availableAttributes[key].add(c[key]);
                });
            });
            
            // Render groups of unique values for each attribute
            Object.keys(availableAttributes).forEach((attrKey, groupIndex) => {
                const uniqueValues = Array.from(availableAttributes[attrKey]);
                const sanitizedKey = attrKey.replace(/\s|\//g, '');
                
                let groupHTML = `
                    <div class="product-option-group" data-option-key="${sanitizedKey}">
                        <label>${attrKey}:</label>
                        <div class="d-flex flex-wrap gap-3" id="choices-${sanitizedKey}">
                `;
                
                uniqueValues.forEach(value => {
                    const inputId = `${sanitizedKey}-${value.replace(/\s|\/|\\|\(|\)/g, '-')}`;
                    
                    groupHTML += `
                        <label class="choice-card" for="${inputId}">
                            <input type="radio" id="${inputId}" name="option-${sanitizedKey}" value="${value}" 
                                   onchange="handleCardSelection('${sanitizedKey}', '${value}')">
                            <span class="label-text">${value}</span>
                        </label>
                    `;
                });

                groupHTML += `</div></div>`;
                standardOptions.innerHTML += groupHTML;
            });

            // Add quantity selector for standard items
            standardOptions.innerHTML += `
                 <div class="product-option-group" data-option-key="QuantitySelector">
                    <label>Quantity:</label>
                    <div class="input-group">
                        <button class="btn btn-outline-secondary" type="button" onclick="updateQuantityStandard(-1)">-</button>
                        <input type="number" id="input-standard-qty" min="1" value="1" class="form-control text-center" oninput="updateFinalPrice()">
                        <button class="btn btn-outline-secondary" type="button" onclick="updateQuantityStandard(1)">+</button>
                    </div>
                </div>
            `;
            
            document.getElementById('finalPriceBox').style.display = 'none';
            document.getElementById('selectionWarning').style.display = 'block';
        }

        showSection('product-detail');
    }

    // Helper for quantity buttons on standard items
    function updateQuantityStandard(change) {
        const input = document.getElementById('input-standard-qty');
        let quantity = parseInt(input.value) || 1;
        quantity = Math.max(1, quantity + change);
        input.value = quantity;
        updateFinalPrice();
    }
    
    // New handler function for card clicks (Standard Items)
    function handleCardSelection(key, value) {
        const sanitizedKey = key;
        
        currentSelectedVariations[sanitizedKey] = value;
        
        document.querySelectorAll(`input[name="option-${sanitizedKey}"]`).forEach(input => {
            input.closest('.choice-card').classList.remove('selected');
        });
        const selectedInput = document.querySelector(`input[name="option-${sanitizedKey}"][value="${value}"]`);
        if (selectedInput) {
            selectedInput.closest('.choice-card').classList.add('selected');
        }

        updateFinalPrice();
    }
    

    // --- Price Update and Calculation Logic (New Hybrid Logic) ---
    
    function getDesignFee(quantity) {
        if (quantity === 0) return 0;
        
        const tier = designTiers.find(t => quantity >= t.minQty && quantity <= t.maxQty);
        
        if (tier) return tier.designFee;
        
        const maxTier = designTiers.reduce((max, t) => t.maxQty > max.maxQty ? t : max, {maxQty: 0, designFee: 0});
        if (quantity > maxTier.maxQty) return maxTier.designFee;

        return 0;
    }

    function updateFinalPrice() {
        
        // 1. Handle Area-Based Products (Panaflex/Wallpaper)
        if (currentProduct && currentProduct.isAreaBased) {
            const width = parseFloat(document.getElementById('input-width').value) || 0;
            const height = parseFloat(document.getElementById('input-height').value) || 0;
            const quantity = parseInt(document.getElementById('input-custom-qty').value) || 0;

            const rateMeta = areaBasedMeta[currentProduct.baseName];
            const baseRate = rateMeta ? rateMeta.rate : 0;
            const minArea = rateMeta ? rateMeta.minArea : 0;
            
            document.getElementById('finalPriceBox').style.display = 'none';
            document.getElementById('areaConstraintWarning').style.display = 'none';
            document.getElementById('selectionWarning').style.display = 'block';
            document.getElementById('designFeeDisplay').classList.remove('alert-danger');
            document.getElementById('designFeeDisplay').classList.add('alert-warning');
            
            if (width <= 0 || height <= 0 || quantity <= 0) {
                document.getElementById('selectionWarning').textContent = "Please enter valid dimensions and quantity.";
                document.getElementById('areaDisplay').textContent = '';
                document.getElementById('designFeeDisplay').textContent = '';
                return;
            }

            const itemArea = width * height;
            const totalArea = itemArea * quantity;
            document.getElementById('areaDisplay').textContent = `Area per piece: ${itemArea.toFixed(2)} sq ft | Total Area: ${totalArea.toFixed(2)} sq ft`;

            if (currentProduct.baseName === '3D Wallpaper' && quantity === 1 && itemArea < minArea) {
                document.getElementById('areaConstraintWarning').textContent = `Minimum order area for a single wall is ${minArea} sq ft. Current size (${itemArea.toFixed(2)} sq ft) is too small. Please contact customer support.`;
                document.getElementById('areaConstraintWarning').style.display = 'block';
                document.getElementById('designFeeDisplay').textContent = 'Design Fee: Cannot calculate due to area constraint.';
                return; 
            }
            
            const baseCost = totalArea * baseRate;
            let designFee = getDesignFee(quantity);
            
            if (designFee > 0) {
                document.getElementById('designFeeDisplay').textContent = `Design Charge (Tiered Flat Fee): + PKR ${designFee.toLocaleString('en-PK')}`;
            } else {
                 document.getElementById('designFeeDisplay').textContent = 'Design Fee: (Contact support for custom quote)';
                 document.getElementById('designFeeDisplay').classList.remove('alert-warning');
                 document.getElementById('designFeeDisplay').classList.add('alert-danger');
            }

            const totalPrice = baseCost + designFee;
            
            document.getElementById('finalPriceDisplay').textContent = `PKR ${totalPrice.toLocaleString('en-PK', { minimumFractionDigits: 0 })}`;
            document.getElementById('finalPriceBox').style.display = 'block';
            document.getElementById('selectionWarning').style.display = 'none';

            return; 
        } 
        
        // 2. Standard Tiered Products (Find price based on card selections)
        
        const quantity = parseInt(document.getElementById('input-standard-qty')?.value) || 1;
        const allAttributes = currentProduct?.combinations.map(c => c.attributes || c);
        
        if (!allAttributes || allAttributes.length === 0) return;

        const requiredKeys = Object.keys(allAttributes[0]).filter(key => key !== 'Price' && key !== 'FullName' && key !== 'Type/Model');
        
        let selectedAttributes = {};
        let allSelected = true;

        requiredKeys.forEach(key => {
            const sanitizedKey = key.replace(/\s|\//g, '');
            if (!currentSelectedVariations[sanitizedKey]) {
                allSelected = false;
            } else {
                selectedAttributes[key] = currentSelectedVariations[sanitizedKey];
            }
        });

        if (!allSelected) {
            document.getElementById('finalPriceBox').style.display = 'none';
            document.getElementById('selectionWarning').textContent = "Please select all required options.";
            document.getElementById('selectionWarning').style.display = 'block';
            return;
        }

        // B. Find matching combination price
        let finalProductCombination = null;
        currentProduct.combinations.forEach(combo => {
            let matches = true;
            requiredKeys.forEach(key => {
                if (combo[key] !== selectedAttributes[key]) {
                    matches = false;
                }
            });
            if (matches) {
                finalProductCombination = combo;
            }
        });
        
        // C. Calculate and Display
        if (finalProductCombination) {
            const unitPrice = finalProductCombination.Price;
            const totalPrice = unitPrice * quantity;
            
            document.getElementById('finalPriceDisplay').textContent = `PKR ${totalPrice.toLocaleString('en-PK', { minimumFractionDigits: 0 })}`;
            document.getElementById('finalPriceBox').style.display = 'block';
            document.getElementById('selectionWarning').style.display = 'none';

        } else {
            document.getElementById('selectionWarning').textContent = "Selected combination not available. Try another mix.";
            document.getElementById('selectionWarning').classList.remove('alert-info');
            document.getElementById('selectionWarning').classList.add('alert-danger');
            document.getElementById('finalPriceBox').style.display = 'none';
            document.getElementById('selectionWarning').style.display = 'block';
        }
    }


    // --- Add to Cart Logic (WhatsApp Routing) ---

    function addToCartFromDetails() {
        const finalPriceText = document.getElementById('finalPriceDisplay').textContent;
        const totalPrice = parseFloat(finalPriceText.replace('PKR', '').replace(/,/g, '').trim()) || 0;
        
        if (totalPrice === 0 || document.getElementById('finalPriceBox').style.display === 'none') {
             showAlert('Please configure the product and ensure the final price is calculated before ordering.', 'error');
             return;
        }

        let itemDetails = '';
        
        if (currentProduct.isAreaBased) {
            const width = parseFloat(document.getElementById('input-width').value) || 0;
            const height = parseFloat(document.getElementById('input-height').value) || 0;
            const quantity = parseInt(document.getElementById('input-custom-qty').value) || 0;
            const totalArea = (width * height) * quantity;
            const designFeeDisplay = document.getElementById('designFeeDisplay').textContent;

            itemDetails = `\n*Product:* ${currentProduct.baseName} (Area-Based)\n*Dimensions:* ${width}ft x ${height}ft\n*Quantity:* ${quantity} piece(s)\n*Total Area:* ${totalArea.toFixed(2)} sq ft\n*Price:* ${finalPriceText} (Includes Design Fee: ${designFeeDisplay.split('+')[1]?.trim() || 'N/A'})`;
            
        } else {
            const quantity = parseInt(document.getElementById('input-standard-qty').value) || 1;
            const details = Object.entries(currentSelectedVariations)
                .map(([key, val]) => `\n- ${key.replace(/[A-Z]/g, ' $&').trim()}: ${val}`);
            
            itemDetails = `\n*Product:* ${currentProduct.baseName} (Standard)\n*Selections:*${details.join('')}\n*Quantity:* ${quantity} unit(s)\n*Total Price:* ${finalPriceText}`;
        }
        
        submitOrderViaWhatsApp(itemDetails, totalPrice);
    }
    
    
    // --- WhatsApp Submission Logic ---

    // 1. General Order Submission (from product page)
    function submitOrderViaWhatsApp(itemDetails, totalPrice) {
        
        let message = `*NEW ARHAM PRINTERS ORDER REQUEST (WEB)*\n`;
        message += `-------------------------------------------\n`;
        message += `${itemDetails}\n`;
        message += `-------------------------------------------\n`;
        message += `*CONFIRMED TOTAL:* ${document.getElementById('finalPriceDisplay').textContent}\n\n`;
        message += `_Please confirm this order, dimensions, and arrange final payment._\n\n`;
        message += `Customer is waiting for contact.`;


        const whatsappLink = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;
        window.open(whatsappLink, '_blank');
        
        showAlert('Opening WhatsApp chat now. Your order details have been prepared!', 'success');
        
        setTimeout(() => {
             showSection('home');
        }, 1500);
    }
    
    // 2. Contact Form Submission Handler
    function handleContactSubmission(e) {
        e.preventDefault();
        
        const name = document.getElementById('contact-name').value;
        const subject = document.getElementById('contact-subject').value;
        const message = document.getElementById('contact-message').value;

        let whatsappMessage = `*NEW CONTACT MESSAGE (WEB)*\n`;
        whatsappMessage += `*Sender:* ${name}\n`;
        whatsappMessage += `*Subject:* ${subject}\n`;
        whatsappMessage += `*Message:* ${message}`;
        
        window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(whatsappMessage)}`, '_blank');

        showAlert('Message sent via WhatsApp!', 'success');
        document.getElementById('contact-form-whatsapp').reset();
    }
    
    // 3. Get A Quote Submission Handler
    function handleQuoteSubmission(e) {
        e.preventDefault();
        
        const name = document.getElementById('quote-name').value;
        const phone = document.getElementById('quote-phone').value;
        const product = document.getElementById('quote-product').value;
        const quantity = document.getElementById('quote-quantity').value;
        const details = document.getElementById('quote-details').value;
        
        let whatsappMessage = `*NEW QUOTE REQUEST (WEB)*\n`;
        whatsappMessage += `*Customer:* ${name}\n`;
        whatsappMessage += `*Phone (Contact):* ${phone}\n`;
        whatsappMessage += `*Product Type:* ${product}\n`;
        whatsappMessage += `*Quantity/Area:* ${quantity}\n`;
        whatsappMessage += `*Specifications:* ${details}`;
        
        window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(whatsappMessage)}`, '_blank');

        showAlert('Quote submitted via WhatsApp! We will contact you shortly.', 'success');
        document.getElementById('quote-form').reset();
    }


    // --- UI/Navigation Functions ---
    
    function showSection(sectionName) {
        document.querySelectorAll('.section').forEach(section => {
            section.classList.remove('active');
        });
        
        document.getElementById(sectionName + '-section').classList.add('active');
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
        });
        
        window.scrollTo(0, 0);
        
        if (sectionName === 'home') {
             const homeLink = document.querySelector('.nav-item.nav-link[href="#home-section"]');
             if (homeLink) homeLink.classList.add('active');
        } else {
             document.querySelector(`.nav-item.nav-link[onclick="showSection('${sectionName}')"]`)?.classList.add('active');
        }
    }
    
    function showAlert(message, type) {
        const alert = document.createElement('div');
        alert.className = `alert alert-${type === 'error' ? 'danger' : type} alert-dismissible fade show position-fixed`;
        alert.style.top = '20px';
        alert.style.right = '20px';
        alert.style.zIndex = '9999';
        alert.style.minWidth = '300px';
        alert.innerHTML = `
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        document.body.appendChild(alert);
        
        setTimeout(() => {
            if (alert.parentNode) {
                alert.parentNode.removeChild(alert);
            }
        }, 5000);
    }

    document.addEventListener('DOMContentLoaded', initialAppLoad);
</script>
</div>
</body>

</html>
