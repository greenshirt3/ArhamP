<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Arham Printers - Printing and Advertising Service</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Printing Services, Business Cards, Stationery, Marketing Materials" name="keywords">
    <meta content="Professional printing services in Pakistan for business cards, brochures, flyers, and more." name="description">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    
    <style>
        /* Additional styles for the enhanced functionality */
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .product-quantity {
            width: 70px;
            text-align: center;
        }
        .checkout-step {
            display: none;
        }
        .checkout-step.active {
            display: block;
        }
        .order-summary-item {
            border-bottom: 1px solid #eee;
            padding: 10px 0;
        }
        .cart-item {
            transition: all 0.3s ease;
        }
        .cart-item.removing {
            opacity: 0;
            transform: translateX(100%);
        }
        /* New Product Detail Styles */
        .product-option-group {
            margin-bottom: 1.5rem;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .product-option-group label {
            font-weight: 600;
            color: var(--bs-dark);
            margin-bottom: 0.75rem;
            display: block;
            font-size: 1.1rem;
        }
        .final-price-box {
            background: var(--bs-primary);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            text-align: center;
            display: none; /* Hidden until valid selection */
        }
        .final-price-box h4 {
            color: white;
        }

        /* CSS for Clickable Card Variations (Standard Items) */
        .choice-card {
            cursor: pointer;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px 15px;
            text-align: center;
            transition: all 0.2s ease;
            flex-grow: 1;
            min-width: 120px;
        }
        .choice-card:hover {
            border-color: var(--bs-secondary);
            background-color: #fff8f8;
        }
        .choice-card.selected {
            border-color: var(--bs-primary);
            background-color: var(--bs-primary);
            color: white;
            box-shadow: 0 0 10px rgba(242, 139, 0, 0.3);
        }
        .choice-card input[type="radio"] {
            display: none;
        }
        .choice-card .label-text {
            font-weight: 500;
            color: var(--bs-dark);
            display: block;
        }
        .choice-card.selected .label-text {
            color: white;
        }
    </style>
</head>

<body>
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <div class="container-fluid bg-dark text-white-50 py-2 px-0 d-none d-lg-block">
        <div class="row gx-0 align-items-center">
            <div class="col-lg-7 px-5 text-start">
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <small class="fa fa-phone-alt me-2"></small>
                    <small>+92 300 6238233</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <small class="far fa-envelope-open me-2"></small>
                    <small>info@arhamprinters.pk</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <small class="far fa-clock me-2"></small>
                    <small>Mon - Fri : 09 AM - 09 PM</small>
                </div>
            </div>
            <div class="col-lg-5 px-5 text-end">
                <div class="h-100 d-inline-flex align-items-center">
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-facebook-f"></i></a>
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-twitter"></i></a>
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-linkedin-in"></i></a>
                    <a class="text-white-50 ms-4" href=""><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </div>
    <nav class="navbar navbar-expand-lg bg-white navbar-light sticky-top px-4 px-lg-5">
        <a href="#home-section" class="navbar-brand d-flex align-items-center" onclick="showSection('home')">
            <h1 class="m-0 text-primary"><i class="fa fa-print me-3"></i>Arham Printers</h1>
        </a>
        <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav mx-auto bg-light pe-4 py-3 py-lg-0">
                <a href="#home-section" class="nav-item nav-link active" onclick="showSection('home')">Home</a>
                <a href="#shop-catalog" class="nav-item nav-link" onclick="showSection('home')">Products</a>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Shop</a>
                    <div class="dropdown-menu bg-light border-0 m-0">
                        <a href="#offset-printing-products" class="dropdown-item" onclick="showSection('home')">Offset & Stationery</a>
                        <a href="#digital-printing-products" class="dropdown-item" onclick="showSection('home')">Digital & Photo</a>
                        <a href="#large-format-products" class="dropdown-item" onclick="showSection('home')">Banners & Merchandise</a>
                        <a href="#" class="dropdown-item" onclick="showSection('cart')">Cart</a>
                        <a href="#" class="dropdown-item" onclick="showSection('checkout')">Checkout</a>
                    </div>
                </div>
                <a href="#" class="nav-item nav-link" onclick="showSection('contact')">Contact</a>
            </div>
            <div class="h-100 d-lg-inline-flex align-items-center">
                <a class="btn-sm-square bg-white text-primary rounded-circle me-4 position-relative" href="#" onclick="showSection('cart')">
                    <i class="fa fa-shopping-bag"></i>
                    <span class="cart-badge" id="cartBadge">0</span>
                </a>
                <a href="#" class="btn btn-primary py-2 px-3 rounded-0 d-none d-lg-block" onclick="showSection('contact')">Get a Quote<i
                        class="fa fa-arrow-right ms-3"></i></a>
            </div>
        </div>
    </nav>
    <section id="home-section" class="section active">
        <div class="container-fluid hero-header bg-light py-5">
            <div class="container py-5">
                <div class="row g-5 align-items-center">
                    <div class="col-lg-6">
                        <h1 class="display-4 mb-3 animated slideInDown">The Future of <span class="text-primary">Printing</span> is Here</h1>
                        <p class="animated slideInDown">Experience professional quality and stunning designs for all your business needsâ€”from letterheads to marketing materials. Arham Printers delivers excellence.</p>
                        <a href="#shop-catalog" class="btn btn-primary py-3 px-5 animated slideInDown" onclick="showSection('home')">Explore Products</a>
                    </div>
                    <div class="col-lg-6 animated fadeIn">
                        <div class="owl-carousel header-carousel">
                            <div class="owl-carousel-item">
                                <img class="img-fluid" src="img/carousel-1.png" alt="Printing Services">
                            </div>
                            <div class="owl-carousel-item">
                                <img class="img-fluid" src="img/carousel-2.png" alt="Business Printing">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid px-0">
            <div class="row g-0">
                <div class="col-6 col-md-4 col-lg-2 border-start border-end wow fadeInUp" data-wow-delay="0.1s">
                    <div class="p-4">
                        <div class="d-inline-flex align-items-center">
                            <i class="fa fa-sync-alt fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Free Return</h6>
                                <p class="mb-0">30 days money back guarantee!</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.2s">
                    <div class="p-4">
                        <div class="d-flex align-items-center">
                            <i class="fab fa-telegram-plane fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Free Shipping</h6>
                                <p class="mb-0">Free shipping on all order</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.3s">
                    <div class="p-4">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-life-ring fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Support 24/7</h6>
                                <p class="mb-0">We support online 24 hrs a day</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.4s">
                    <div class="p-4">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-credit-card fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Receive Gift Card</h6>
                                <p class="mb-0">Recieve gift all over oder $50</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.5s">
                    <div class="p-4">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-lock fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Secure Payment</h6>
                                <p class="mb-0">We Value Your Security</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.6s">
                    <div class="p-4">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-blog fa-2x text-primary"></i>
                            <div class="ms-4">
                                <h6 class="text-uppercase mb-2">Online Service</h6>
                                <p class="mb-0">Free return products in 30 days</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid shop py-5" id="shop-catalog">
            <div class="container py-5">
                <div class="row g-4">
                    <div class="col-lg-3 wow fadeInUp" data-wow-delay="0.1s">
                         <div class="product-categories mb-4">
                            <h4>Products Categories</h4>
                            <ul class="list-unstyled" id="productCategoriesList">
                                <li>
                                    <div class="categories-item">
                                        <a href="#offset-printing-products" class="text-dark"><i class="fas fa-print text-primary me-2"></i>
                                            Offset & Stationery</a>
                                        <span>(8)</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="categories-item">
                                        <a href="#digital-printing-products" class="text-dark"><i class="fas fa-copy text-primary me-2"></i>
                                            Digital & Photo</a>
                                        <span>(6)</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="categories-item">
                                        <a href="#large-format-products" class="text-dark"><i class="fas fa-boxes text-primary me-2"></i>
                                            Banners & Merchandise</a>
                                        <span>(12)</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="price mb-4">
                            <h4 class="mb-2">Price Range (PKR)</h4>
                            <input type="range" class="form-range w-100" id="rangeInput" name="rangeInput" min="0" max="10000"
                                value="0" oninput="amount.value=rangeInput.value">
                            <output id="amount" name="amount" min-velue="0" max-value="10000" for="rangeInput">0</output>
                            <div class=""></div>
                        </div>
                        
                        <a href="#">
                            <div class="position-relative">
                                <img src="img/product-banner-2.jpg" class="img-fluid w-100 rounded" alt="Image">
                                <div class="text-center position-absolute d-flex flex-column align-items-center justify-content-center rounded p-4"
                                    style="width: 100%; height: 100%; top: 0; right: 0; background: rgba(242, 139, 0, 0.3);">
                                    <h5 class="display-6 text-primary">SALE</h5>
                                    <h4 class="text-secondary">Get UP To 50% Off</h4>
                                    <a href="#" class="btn btn-primary rounded-pill px-4">Shop Now</a>
                                </div>
                            </div>
                        </a>
                    </div>
                    
                    <div class="col-lg-9 wow fadeInUp" data-wow-delay="0.1s">
                        <div class="row g-4" id="main-product-catalog">
                            </div>
                    </div>
                </div>
            </div>
        </div>
        </section>

    <section id="product-detail-section" class="section">
        <div class="container-fluid page-header py-5">
            <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s" id="detail-product-name-header">Product Details</h1>
            <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
                <li class="breadcrumb-item"><a href="#" onclick="showSection('home')">Home</a></li>
                <li class="breadcrumb-item active text-white">Details</li>
            </ol>
        </div>

        <div class="container-fluid py-5">
            <div class="container py-5">
                <div class="row g-5">
                    <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
                        <div class="d-flex justify-content-center">
                            <img id="detail-product-image" src="img/placeholder.jpg" class="img-fluid rounded" alt="Product Image" style="max-height: 400px;">
                        </div>
                    </div>
                    
                    <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.3s">
                        <h2 class="fw-bold mb-4" id="detail-product-name-body">Product Name</h2>
                        
                        <div id="custom-area-inputs" style="display: none;">
                            <div class="product-option-group" data-option-key="Dimensions">
                                <label>Wall/Piece Dimensions (Feet):</label>
                                <div class="d-flex gap-3">
                                    <input type="number" id="input-width" min="1" placeholder="Width" class="form-control" oninput="updateFinalPrice()">
                                    <span class="align-self-center">x</span>
                                    <input type="number" id="input-height" min="1" placeholder="Height" class="form-control" oninput="updateFinalPrice()">
                                </div>
                                <small class="text-muted mt-2 d-block" id="areaDisplay"></small>
                            </div>
                            
                            <div class="product-option-group" data-option-key="Quantity">
                                <label>Number of Pieces/Walls:</label>
                                <input type="number" id="input-custom-qty" min="1" value="1" class="form-control" oninput="updateFinalPrice()">
                            </div>
                            
                            <div class="alert alert-warning mt-3" id="designFeeDisplay"></div>
                            <div class="alert alert-danger mt-3" id="areaConstraintWarning" style="display: none;"></div>
                        </div>

                        <div id="standard-options-fields">
                            </div>

                        <div class="final-price-box" id="finalPriceBox">
                            <h4 class="mb-2">Final Price</h4>
                            <h3 class="display-6 fw-bold" id="finalPriceDisplay">PKR 0</h3>
                            
                            <button class="btn btn-secondary py-2 px-4 w-100 mt-3" onclick="addToCartFromDetails()">
                                <i class="fas fa-shopping-cart me-2"></i> Add To Cart
                            </button>
                        </div>
                        
                        <div class="alert alert-info mt-3" id="selectionWarning" style="display: block;">
                            Please enter dimensions/quantity or select all options above to see the final price.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="cart-section" class="section">
        <div class="container-fluid page-header py-5">
            <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s">Shopping Cart</h1>
            <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
                <li class="breadcrumb-item"><a href="#" onclick="showSection('home')">Home</a></li>
                <li class="breadcrumb-item active text-white">Cart</li>
            </ol>
        </div>

        <div class="container-fluid py-5">
            <div class="container py-5">
                <div id="cart-items-container">
                    <div class="text-center py-5" id="empty-cart-message">
                        <i class="fas fa-shopping-cart fa-4x text-muted mb-4"></i>
                        <h3 class="text-muted">Your cart is empty</h3>
                        <p class="text-muted">Add some products to your cart to see them here</p>
                        <a href="#shop-catalog" class="btn btn-primary mt-3" onclick="showSection('home')">Continue Shopping</a>
                    </div>
                </div>
                
                <div class="row mt-5" id="cart-actions" style="display: none;">
                    <div class="col-md-8">
                        <div class="d-flex">
                            <input type="text" class="form-control me-2" placeholder="Coupon Code" id="coupon-code">
                            <button class="btn btn-primary" onclick="applyCoupon()">Apply Coupon</button>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="bg-light rounded p-4">
                            <h4 class="mb-4">Cart Total</h4>
                            <div class="d-flex justify-content-between mb-3">
                                <span>Subtotal:</span>
                                <span id="cart-subtotal">PKR 0</span>
                            </div>
                            <div class="d-flex justify-content-between mb-3">
                                <span>Shipping:</span>
                                <span id="cart-shipping">PKR 300</span>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between mb-3">
                                <strong>Total:</strong>
                                <strong id="cart-total">PKR 300</strong>
                            </div>
                            <button class="btn btn-primary w-100 mt-3" onclick="showSection('checkout')">Proceed to Checkout</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="checkout-section" class="section">
        <div class="container-fluid page-header py-5">
            <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s">Checkout</h1>
            <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
                <li class="breadcrumb-item"><a href="#" onclick="showSection('home')">Home</a></li>
                <li class="breadcrumb-item"><a href="#" onclick="showSection('cart')">Cart</a></li>
                <li class="breadcrumb-item active text-white">Checkout</li>
            </ol>
        </div>

        <div class="container-fluid bg-light py-5">
            <div class="container py-5">
                <div class="row mb-5">
                    <div class="col-12">
                        <ul class="nav nav-pills justify-content-center">
                            <li class="nav-item mx-2">
                                <a class="nav-link active" href="#" onclick="showCheckoutStep(1)">Billing Details</a>
                            </li>
                            <li class="nav-item mx-2">
                                <a class="nav-link" href="#" onclick="showCheckoutStep(2)">Payment Method</a>
                            </li>
                            <li class="nav-item mx-2">
                                <a class="nav-link" href="#" onclick="showCheckoutStep(3)">Order Review</a>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="row g-5">
                    <div class="col-lg-8">
                        <div id="checkout-step-1" class="checkout-step active">
                            <h3 class="mb-4">Billing Details</h3>
                            <form id="billing-form">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">First Name *</label>
                                        <input type="text" class="form-control" required placeholder="First Name">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Last Name *</label>
                                        <input type="text" class="form-control" required placeholder="Last Name">
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Company Name</label>
                                        <input type="text" class="form-control">
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Address *</label>
                                        <input type="text" class="form-control" placeholder="House Number Street Name" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Town/City *</label>
                                        <input type="text" class="form-control" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Postcode/Zip *</label>
                                        <input type="text" class="form-control" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Phone *</label>
                                        <input type="tel" class="form-control" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Email Address *</label>
                                        <input type="email" class="form-control" required>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="create-account">
                                            <label class="form-check-label" for="create-account">Create an account?</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="different-address">
                                            <label class="form-check-label" for="different-address">Ship to a different address?</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Order Notes (Optional)</label>
                                        <textarea class="form-control" rows="4" placeholder="Notes about your order"></textarea>
                                    </div>
                                    <div class="col-12">
                                        <button type="button" class="btn btn-primary" onclick="showCheckoutStep(2)">Continue to Payment</button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div id="checkout-step-2" class="checkout-step">
                            <h3 class="mb-4">Payment Method</h3>
                            <div class="mb-4">
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="radio" name="payment-method" id="bank-transfer" checked>
                                    <label class="form-check-label" for="bank-transfer">
                                        Direct Bank Transfer
                                    </label>
                                </div>
                                <p class="ps-4 text-muted">Make your payment directly into our bank account. Please use your Order ID as the payment reference.</p>
                                
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="radio" name="payment-method" id="check-payments">
                                    <label class="form-check-label" for="check-payments">
                                        Check Payments
                                    </label>
                                </div>
                                
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="radio" name="payment-method" id="cash-on-delivery">
                                    <label class="form-check-label" for="cash-on-delivery">
                                        Cash on Delivery
                                    </label>
                                </div>
                                
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="radio" name="payment-method" id="paypal">
                                    <label class="form-check-label" for="paypal">
                                        PayPal
                                    </label>
                                </div>
                            </div>
                            <div class="d-flex justify-content-between">
                                <button type="button" class="btn btn-secondary" onclick="showCheckoutStep(1)">Back</button>
                                <button type="button" class="btn btn-primary" onclick="showCheckoutStep(3)">Continue to Review</button>
                            </div>
                        </div>

                        <div id="checkout-step-3" class="checkout-step">
                            <h3 class="mb-4">Order Review</h3>
                            <div class="mb-4">
                                <h5>Billing Details</h5>
                                <div id="billing-details-review" class="bg-light p-3 rounded">
                                    </div>
                            </div>
                            <div class="mb-4">
                                <h5>Payment Method</h5>
                                <div id="payment-method-review" class="bg-light p-3 rounded">
                                    </div>
                            </div>
                            <div class="d-flex justify-content-between">
                                <button type="button" class="btn btn-secondary" onclick="showCheckoutStep(2)">Back</button>
                                <button type="button" class="btn btn-primary" onclick="placeOrder()">Place Order</button>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4">
                        <div class="bg-white rounded p-4 sticky-top" style="top: 100px;">
                            <h4 class="mb-4">Order Summary</h4>
                            <div id="checkout-order-items">
                                </div>
                            <div class="d-flex justify-content-between mt-3">
                                <span>Subtotal:</span>
                                <span id="checkout-subtotal">PKR 0</span>
                            </div>
                            <div class="d-flex justify-content-between mt-2">
                                <span>Shipping:</span>
                                <span id="checkout-shipping">PKR 300</span>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between mt-2">
                                <strong>Total:</strong>
                                <strong id="checkout-total">PKR 300</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="contact-section" class="section">
        <div class="container-fluid page-header py-5">
            <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s">Contact Us</h1>
            <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
                <li class="breadcrumb-item"><a href="#" onclick="showSection('home')">Home</a></li>
                <li class="breadcrumb-item active text-white">Contact</li>
            </ol>
        </div>

        <div class="container-fluid py-5">
            <div class="container py-5">
                <div class="row g-4">
                    <div class="col-lg-4 wow fadeInUp" data-wow-delay="0.1s">
                        <div class="bg-light p-4 rounded">
                            <div class="d-flex align-items-center mb-4">
                                <div class="d-flex align-items-center justify-content-center border border-primary rounded-circle mb-3"
                                    style="width: 60px; height: 60px;">
                                    <i class="fa fa-map-marker-alt text-primary fs-4"></i>
                                </div>
                                <div class="ms-4">
                                    <h5 class="mb-2">Our Location</h5>
                                    <p class="mb-0">Domela Chowk,Tanda Road, Jalalpur Jattan</p>
                                </div>
                            </div>
                            
                            <div class="d-flex align-items-center mb-4">
                                <div class="d-flex align-items-center justify-content-center border border-primary rounded-circle mb-3"
                                    style="width: 60px; height: 60px;">
                                    <i class="fa fa-phone-alt text-primary fs-4"></i>
                                </div>
                                <div class="ms-4">
                                    <h5 class="mb-2">Call Us</h5>
                                    <p class="mb-0">+92 300 6238233</p>
                                </div>
                            </div>
                            
                            <div class="d-flex align-items-center">
                                <div class="d-flex align-items-center justify-content-center border border-primary rounded-circle mb-3"
                                    style="width: 60px; height: 60px;">
                                    <i class="fa fa-envelope text-primary fs-4"></i>
                                </div>
                                <div class="ms-4">
                                    <h5 class="mb-2">Email Us</h5>
                                    <p class="mb-0">info@arhamprinters.pk</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-8 wow fadeInUp" data-wow-delay="0.3s">
                        <div class="bg-light p-4 rounded">
                            <form id="contact-form">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="name" placeholder="Your Name" required>
                                            <label for="name">Your Name</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="email" class="form-control border-0" id="email" placeholder="Your Email" required>
                                            <label for="email">Your Email</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="subject" placeholder="Subject" required>
                                            <label for="subject">Subject</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <textarea class="form-control border-0" placeholder="Leave a message here" id="message" style="height: 150px" required></textarea>
                                            <label for="message">Message</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <button class="btn btn-primary w-100 py-3" type="submit">Send Message</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="container-fluid footer py-5 wow fadeIn" data-wow-delay="0.2s">
        <div class="container py-5">
            <div class="row g-4 rounded mb-5" style="background: rgba(255, 255, 255, .03);">
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fas fa-map-marker-alt fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Address</h4>
                            <p class="mb-2">Domela Chowk,Tanda Road, Jalalpur Jattan</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fas fa-envelope fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Mail Us</h4>
                            <p class="mb-2">info@arhamprinters.pk</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fa fa-phone-alt fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Telephone</h4>
                            <p class="mb-2">+92 300 6238233</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fab fa-facebook-f fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Follow Us</h4>
                            <div class="d-flex pt-2">
                                <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i
                                        class="fab fa-twitter"></i></a>
                                <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i
                                        class="fab fa-facebook-f"></i></a>
                                <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i
                                        class="fab fa-youtube"></i></a>
                                <a class="btn btn-square btn-outline-light rounded-circle me-0" href=""><i
                                        class="fab fa-linkedin-in"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="container-fluid copyright">
            <div class="container">
                <div class="row">
                   <div class="col-12 text-center mb-3 mb-md-0">
                        <span class="text-white">
                    <a href="#" class="text-white">
                        <i class="fas fa-copyright text-light me-2"></i>
                        Arham Printers
                    </a>, All rights reserved 2025.
                </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a href="#" class="btn btn-primary btn-lg-square back-to-top"><i class="fa fa-arrow-up"></i></a>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>

    <script>
    // --- Configuration ---
    const PUBLIC_DATA_URL = 'customer-data.json'; 
    let allProducts = {}; 
    let cart = [];
    let currentProduct = null; 

    // Global stores for pricing logic
    let allProductGroups = {};
    let currentSelectedVariations = {}; 
    let designTiers = []; // Stores the tiered design fees
    let areaBasedMeta = {}; // Stores area-based product base rates and min area constraints

    // --- Core Functions ---

    async function initialAppLoad() {
        let rawData;
        try {
            const response = await fetch(PUBLIC_DATA_URL);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            rawData = await response.json();
        } catch (error) {
            console.error("Failed to load shop data:", error);
            showAlert("Failed to load product data. Check the developer console.", 'error');
            return;
        }
        
        const productGroups = initialProductSetup(rawData);
        renderMainCatalog(productGroups);
        updateCartBadge();
        if (typeof WOW !== 'undefined') { new WOW().init(); }
        
        // Initial section display is correct
        document.querySelectorAll('.section').forEach(section => {
            if (section.id !== 'home-section') {
                section.classList.remove('active');
            }
        });
        document.getElementById('home-section').classList.add('active');
    }

    // Initial setup to categorize all product items and extract pricing metadata
    function initialProductSetup(rawData) {
        const productGroups = {};
        
        rawData.calculatorData.items.forEach(item => {
            const baseName = item.subcategory;
            const fullName = item.itemName;

            // 1. Capture Design Tiers and Area-Based Metadata
            if (baseName === "PanaflexDesignTiers" && item.tiers) {
                designTiers = item.tiers;
                return; 
            }
            if (item.isAreaBased) {
                areaBasedMeta[baseName] = { 
                    rate: item.price, 
                    minArea: item.minArea || 0 
                };
            }

            // 2. Map all items to a flattened allProducts (for cart lookups)
            allProducts[fullName] = {
                price: item.price,
                imageFile: `${baseName.replace(/\//g, '-')}.jpg` 
            };

            // 3. Group the data by base product (subcategory) for the catalog
            if (!productGroups[baseName]) {
                productGroups[baseName] = {
                    baseName: baseName,
                    minPrice: item.price,
                    imageFile: `${baseName.replace(/\//g, '-')}.jpg`,
                    isAreaBased: item.isAreaBased || false,
                    combinations: [] 
                };
            }

            // Update minimum price
            if (item.price < productGroups[baseName].minPrice) {
                productGroups[baseName].minPrice = item.price;
            }

            // --- Simplified Attribute Extraction Logic (for standard tiered items) ---
            let attributes = {};
            if (!item.isAreaBased) {
                 // Example simplification for standard items. For real project, you need smarter parsing here.
                attributes['Specification/Tier'] = fullName.replace(baseName, '').trim() || fullName;
            } else {
                 attributes['Specification/Tier'] = 'Custom Area Rate';
            }
            
            attributes['Price'] = item.price;
            attributes['FullName'] = fullName; 

            productGroups[baseName].combinations.push(attributes);
            allProducts[fullName].attributes = attributes;
            allProducts[fullName].imageFile = productGroups[baseName].imageFile;
        });
        
        allProductGroups = productGroups;
        return productGroups;
    }

    // --- Render Simplified Main Catalog ---
    function renderMainCatalog(productGroups) {
        const container = document.getElementById('main-product-catalog');
        let html = '';

        const orderedKeys = [
            'LetterPads', 'Ishtihar', 'Pamphlet/Menu', 'Envelop', 'Visiting Cards', 
            'Bill Books', 'Receipt Book', 'File Cover', 'Rubber Stamp', 'Sticker Print', 
            'Photo Print', 'Design Only', 'PVC Cards', 'Photo Frames', 'Badges',
            'China', 'Star', 'Venyl', 'One Vision', 'Backlit', '3D Wallpaper', 'Shirts', 'Safety Jacket',
            'Caps', 'Mugs', 'Bottles', 'Jewelry', 'Pens', 'Pencil Trays'
        ];
        
        // Get lowest price globally for the item type
        const getMinPrice = (baseName) => {
            const group = allProductGroups[baseName];
            if (!group || group.combinations.length === 0) return 40; // Default fallback
            
            // For Area-Based items, use the Base Rate as the starting price
            if (group.isAreaBased && areaBasedMeta[baseName]) return areaBasedMeta[baseName].rate;

            // Otherwise, find the lowest fixed price
            return group.combinations.reduce((min, combo) => Math.min(min, combo.Price), Infinity);
        };


        orderedKeys.forEach(key => {
            const product = productGroups[key];
            // Skip the metadata entry
            if (key === "PanaflexDesignTiers") return;

            if (product) {
                const imagePath = `img/products/${product.imageFile}`;
                const displayPrice = getMinPrice(key);
                const pricePrefix = product.isAreaBased ? 'Rate/Sq Ft: PKR' : 'Starting from: PKR';
                const buttonText = product.isAreaBased ? 'Configure Area' : 'View Details';

                html += `
                <div class='col-md-4 col-sm-6 mb-4'>
                    <div class='card h-100 shadow-sm'>
                        <img src='${imagePath}' onerror="this.onerror=null;this.src='img/products/${key.replace(/\//g, '-')}.png';" class='card-img-top' alt='${product.baseName}'>
                        <div class='card-body text-center'>
                            <h5 class='card-title'>${product.baseName}</h5>
                            <p class='mt-2 text-primary fw-bold'>${pricePrefix} ${displayPrice.toLocaleString('en-PK', { minimumFractionDigits: 0 })}</p>
                            <button class="btn btn-primary w-100 mt-2" onclick="showProductDetails('${product.baseName.replace(/\//g, '\\/')}')"><i class="fas fa-search me-2"></i> ${buttonText}</button>
                        </div>
                    </div>
                </div>
                `;
            }
        });
        
        container.innerHTML = html;
    }

    // 4. Navigate to and Populate Product Detail Page
    // 4. Navigate to and Populate Product Detail Page
function showProductDetails(productName) {
    const name = productName.replace(/\\/g, ''); 
    const productData = allProductGroups[name];
    currentProduct = productData;
    currentSelectedVariations = {}; // Reset selections

    if (!currentProduct) {
        showAlert(`Product "${name}" details not found.`, 'error');
        return;
    }

    // Update headers and image
    document.getElementById('detail-product-name-header').textContent = currentProduct.baseName;
    document.getElementById('detail-product-name-body').textContent = currentProduct.baseName;
    const imagePath = `img/products/${currentProduct.imageFile}`;
    document.getElementById('detail-product-image').src = imagePath;
    document.getElementById('detail-product-image').onerror = function() { 
         this.src = `img/products/${currentProduct.baseName.replace(/\//g, '-')}.png`; 
    };

    const areaInputs = document.getElementById('custom-area-inputs');
    const standardOptions = document.getElementById('standard-options-fields');
    const optionsContainer = document.getElementById('standard-options-fields');
    
    // Reset all forms/warnings
    document.getElementById('finalPriceBox').style.display = 'none';
    document.getElementById('selectionWarning').textContent = "Please enter dimensions/quantity or select all options above to see the final price.";
    document.getElementById('selectionWarning').classList.remove('alert-danger');
    document.getElementById('selectionWarning').classList.add('alert-info');
    document.getElementById('selectionWarning').style.display = 'block';


    // ðŸ›‘ START CORE LOGIC: Area-Based vs. Standard ðŸ›‘

    if (currentProduct.isAreaBased) {
        // --- AREA-BASED SETUP (Panaflex/Wallpaper) ---
        areaInputs.style.display = 'block';
        standardOptions.style.display = 'none';
        
        // Reset inputs and warnings
        document.getElementById('input-width').value = '';
        document.getElementById('input-height').value = '';
        document.getElementById('input-custom-qty').value = 1;
        document.getElementById('areaDisplay').textContent = '';
        document.getElementById('areaConstraintWarning').style.display = 'none';
        document.getElementById('designFeeDisplay').textContent = 'Design Fee: Calculating...';
        document.getElementById('designFeeDisplay').classList.remove('alert-danger');
        document.getElementById('designFeeDisplay').classList.add('alert-warning');
        
        // Immediately run price update for initial state
        updateFinalPrice();

    } else {
        // --- STANDARD TIERED ITEM SETUP (LetterPads, Mugs, etc.) ---
        areaInputs.style.display = 'none';
        standardOptions.style.display = 'block';
        optionsContainer.innerHTML = ''; // Clear previous contents

        // Determine unique attribute keys and render clickable cards
        const availableAttributes = {};
        currentProduct.combinations.forEach(c => {
            Object.keys(c).filter(key => key !== 'Price' && key !== 'FullName').forEach(key => {
                if (!availableAttributes[key]) availableAttributes[key] = new Set();
                availableAttributes[key].add(c[key]);
            });
        });
        
        // Render groups of unique values for each attribute
        Object.keys(availableAttributes).forEach((attrKey, groupIndex) => {
            const uniqueValues = Array.from(availableAttributes[attrKey]);
            const sanitizedKey = attrKey.replace(/\s/g, '');
            
            let groupHTML = `
                <div class="product-option-group" data-option-key="${sanitizedKey}">
                    <label>${attrKey}:</label>
                    <div class="d-flex flex-wrap gap-3" id="choices-${sanitizedKey}">
            `;
            
            uniqueValues.forEach(value => {
                const inputId = `${sanitizedKey}-${value.replace(/\s|\/|\\|\(|\)/g, '-')}`;
                
                groupHTML += `
                    <label class="choice-card" for="${inputId}">
                        <input type="radio" id="${inputId}" name="option-${sanitizedKey}" value="${value}" 
                               onchange="handleCardSelection('${sanitizedKey}', '${value}')">
                        <span class="label-text">${value}</span>
                    </label>
                `;
            });

            groupHTML += `</div></div>`;
            optionsContainer.innerHTML += groupHTML;
        });

        // Reset price area to hide price until selection is made
        document.getElementById('finalPriceBox').style.display = 'none';
        document.getElementById('selectionWarning').style.display = 'block';
    }

    showSection('product-detail');
        }
        
    // --- Price Update and Calculation Logic (New Hybrid Logic) ---
    
    function getDesignFee(quantity) {
        if (quantity === 0) return 0;
        
        const tier = designTiers.find(t => quantity >= t.minQty && quantity <= t.maxQty);
        
        if (tier) return tier.designFee;
        
        // Max limit: If quantity exceeds the max tier (e.g., > 50)
        const maxTier = designTiers.reduce((max, t) => t.maxQty > max.maxQty ? t : max, {maxQty: 0, designFee: 0});
        if (quantity > maxTier.maxQty) return maxTier.designFee;

        return 0; // Should not happen if tiers cover all ranges
    }

    function updateFinalPrice() {
        // 1. Handle Standard Tiered Products (Logic for cards/dropdowns - omitted/placeholder)
        if (!currentProduct || !currentProduct.isAreaBased) {
            // Logic for standard card selection should be here.
            document.getElementById('selectionWarning').textContent = "Please select all options for standard items.";
            document.getElementById('designFeeDisplay').style.display = 'none';
            // Placeholder: Assume 1000 PKR total for now if non-area based.
            // document.getElementById('finalPriceDisplay').textContent = 'PKR 1,000';
            // document.getElementById('finalPriceBox').style.display = 'block';
            return;
        }
        
        // 2. Handle Area-Based Products (Panaflex/Wallpaper)
        
        const width = parseFloat(document.getElementById('input-width').value) || 0;
        const height = parseFloat(document.getElementById('input-height').value) || 0;
        const quantity = parseInt(document.getElementById('input-custom-qty').value) || 0;

        const rateMeta = areaBasedMeta[currentProduct.baseName];
        const baseRate = rateMeta ? rateMeta.rate : 0;
        const minArea = rateMeta ? rateMeta.minArea : 0;
        
        // Reset dynamic warnings/displays
        document.getElementById('finalPriceBox').style.display = 'none';
        document.getElementById('areaConstraintWarning').style.display = 'none';
        document.getElementById('selectionWarning').style.display = 'block';
        document.getElementById('designFeeDisplay').classList.remove('alert-danger');
        document.getElementById('designFeeDisplay').classList.add('alert-warning');
        
        if (width <= 0 || height <= 0 || quantity <= 0) {
            document.getElementById('selectionWarning').textContent = "Please enter valid dimensions and quantity.";
            document.getElementById('areaDisplay').textContent = '';
            document.getElementById('designFeeDisplay').textContent = '';
            return;
        }

        const itemArea = width * height;
        const totalArea = itemArea * quantity;
        
        document.getElementById('areaDisplay').textContent = `Area per piece: ${itemArea.toFixed(2)} sq ft | Total Area: ${totalArea.toFixed(2)} sq ft`;

        // A. Check Minimum Area Constraint (3D Wallpaper only, one wall)
        if (currentProduct.baseName === '3D Wallpaper' && quantity === 1 && itemArea < minArea) {
            document.getElementById('areaConstraintWarning').textContent = `Minimum order area for a single wall is ${minArea} sq ft. Current size (${itemArea.toFixed(2)} sq ft) is too small. Please contact customer support.`;
            document.getElementById('areaConstraintWarning').style.display = 'block';
            document.getElementById('designFeeDisplay').textContent = 'Design Fee: Cannot calculate due to area constraint.';
            return; 
        }
        
        // B. Calculate Base Cost (Area x Rate x Qty)
        const baseCost = totalArea * baseRate;

        // C. Calculate Design Charge (Tiered Flat Fee)
        let designFee = getDesignFee(quantity);
        
        if (designFee > 0) {
            document.getElementById('designFeeDisplay').textContent = `Design Charge (Tiered Flat Fee): + PKR ${designFee.toLocaleString('en-PK')}`;
        } else {
             document.getElementById('designFeeDisplay').textContent = 'Design Fee: (Contact support for custom quote)';
             document.getElementById('designFeeDisplay').classList.remove('alert-warning');
             document.getElementById('designFeeDisplay').classList.add('alert-danger');
        }

        // D. Final Price Calculation
        const totalPrice = baseCost + designFee;
        
        // E. Display Results
        document.getElementById('finalPriceDisplay').textContent = `PKR ${totalPrice.toLocaleString('en-PK', { minimumFractionDigits: 0 })}`;
        document.getElementById('finalPriceBox').style.display = 'block';
        document.getElementById('selectionWarning').style.display = 'none';
    }


    // --- Add to Cart Logic (For Area-Based Items) ---
    function addToCartFromDetails() {
        if (!currentProduct.isAreaBased) {
            showAlert('Please select all options for standard products before adding to cart.', 'error');
            return;
        }

        const width = parseFloat(document.getElementById('input-width').value) || 0;
        const height = parseFloat(document.getElementById('input-height').value) || 0;
        const quantity = parseInt(document.getElementById('input-custom-qty').value) || 0;
        
        // Final sanity checks
        if (width <= 0 || height <= 0 || quantity <= 0) {
            showAlert('Please enter valid dimensions and quantity.', 'error');
            return;
        }
        if (document.getElementById('areaConstraintWarning').style.display !== 'none') {
            showAlert('Cannot add to cart due to area constraint.', 'error');
            return;
        }

        // Get Final Calculated Price from display (as the logic is complex)
        const totalPriceText = document.getElementById('finalPriceDisplay').textContent;
        const totalPrice = parseFloat(totalPriceText.replace('PKR', '').replace(/,/g, '').trim()) || 0;
        
        if (totalPrice === 0) {
             showAlert('Final price calculation failed. Please check inputs.', 'error');
             return;
        }

        const totalArea = (width * height) * quantity;
        const cartName = `${currentProduct.baseName} (${width}x${height} ft piece, Qty ${quantity}, ${totalArea.toFixed(2)} sq ft total)`;
        
        // We add the entire order as ONE job item with the TOTAL calculated price
        const existingItem = cart.find(item => item.name === cartName);
        
        if (existingItem) {
            // Since this is a custom order defined by WxHxQ, treating quantity increment is risky.
            // Best to prevent adding the EXACT same WxHxQ twice or ask for user confirmation.
            showAlert('This exact order quantity and size is already in the cart. Adjust the current item in Cart.', 'info');
            return;
        } else {
            const imageFile = currentProduct ? currentProduct.imageFile : 'placeholder.jpg';
            
            cart.push({
                name: cartName,
                price: totalPrice, 
                imageFile: imageFile, 
                quantity: 1 // Quantity 1 means ONE job lot, priced at totalPrice
            });
        }
        
        updateCartBadge();
        showAlert(`'${cartName}' added to cart! Total Price: PKR ${totalPrice.toLocaleString('en-PK')}`, 'success');
        showSection('cart');
    }

    // --- Utility/Global Functions (Keep/Adjusted for consistency) ---
    
    function showSection(sectionName) {
        document.querySelectorAll('.section').forEach(section => {
            section.classList.remove('active');
        });
        
        document.getElementById(sectionName + '-section').classList.add('active');
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
        });
        
        window.scrollTo(0, 0);
        
        if (sectionName === 'cart') {
            updateCartDisplay();
        }
        
        if (sectionName === 'checkout') {
            showCheckoutStep(1); 
            updateCheckoutDisplay();
        }
        
        if (sectionName === 'home') {
             const homeLink = document.querySelector('.nav-item.nav-link[href="#home-section"]');
             if (homeLink) homeLink.classList.add('active');
        } else {
             document.querySelector(`.nav-item.nav-link[onclick="showSection('${sectionName}')"]`)?.classList.add('active');
        }
    }
    
    function updateCartBadge() {
        const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
        document.getElementById('cartBadge').textContent = totalItems;
    }
    
    function updateCartDisplay() {
        const container = document.getElementById('cart-items-container');
        const actions = document.getElementById('cart-actions');
        const emptyMessage = document.getElementById('empty-cart-message');
        
        if (cart.length === 0) {
            emptyMessage.style.display = 'block';
            actions.style.display = 'none';
            container.innerHTML = '';
            container.appendChild(emptyMessage);
            return;
        }
        
        emptyMessage.style.display = 'none';
        actions.style.display = 'flex';
        
        let html = '';
        let subtotal = 0;
        
        cart.forEach((item, index) => {
            const itemTotal = item.price * item.quantity;
            subtotal += itemTotal;
            
            const priceFormatted = item.price.toLocaleString('en-PK', { style: 'currency', currency: 'PKR', minimumFractionDigits: 0 });
            const totalFormatted = itemTotal.toLocaleString('en-PK', { style: 'currency', currency: 'PKR', minimumFractionDigits: 0 });
            
            const imagePath = `img/products/${item.imageFile}`;

            html += `
            <div class="cart-item border rounded p-3 mb-3" id="cart-item-${index}">
                <div class="row align-items-center">
                    <div class="col-md-2">
                        <img src="${imagePath}" class="img-fluid w-100 rounded-top" alt="${item.name}">
                    </div>
                    <div class="col-md-4">
                        <h5 class="mb-1">${item.name}</h5>
                        <p class="mb-0 text-muted">${priceFormatted}</p>
                    </div>
                    <div class="col-md-3">
                        <div class="input-group">
                            <button class="btn btn-outline-secondary" type="button" onclick="updateQuantityCart(${index}, -1)">-</button>
                            <input type="text" class="form-control text-center product-quantity" value="${item.quantity}" readonly>
                            <button class="btn btn-outline-secondary" type="button" onclick="updateQuantityCart(${index}, 1)">+</button>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <h5 class="mb-0">${totalFormatted}</h5>
                    </div>
                    <div class="col-md-1">
                        <button class="btn btn-link text-danger" onclick="removeFromCart(${index})">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
        
        const shipping = 300.00; 
        const total = subtotal + shipping;
        
        document.getElementById('cart-subtotal').textContent = subtotal.toLocaleString('en-PK', { style: 'currency', currency: 'PKR', minimumFractionDigits: 0 });
        document.getElementById('cart-total').textContent = total.toLocaleString('en-PK', { style: 'currency', currency: 'PKR', minimumFractionDigits: 0 });
        document.getElementById('cart-shipping').textContent = shipping.toLocaleString('en-PK', { style: 'currency', currency: 'PKR', minimumFractionDigits: 0 });
    }

    function updateQuantityCart(index, change) {
        if (cart[index].quantity + change > 0) {
            cart[index].quantity += change;
            updateCartDisplay();
            updateCartBadge();
        }
    }
    
    function removeFromCart(index) {
        const itemElement = document.getElementById(`cart-item-${index}`);
        itemElement.classList.add('removing');
        
        setTimeout(() => {
            cart.splice(index, 1);
            updateCartDisplay();
            updateCartBadge();
            showAlert('Product removed from cart', 'info');
        }, 300);
    }

    function showCheckoutStep(step) {
        document.querySelectorAll('.checkout-step').forEach(step => {
            step.classList.remove('active');
        });
        
        document.getElementById(`checkout-step-${step}`).classList.add('active');
        
        updateCheckoutDisplay();
    }
    
    function updateCheckoutDisplay() {
        const container = document.getElementById('checkout-order-items');
        let html = '';
        let subtotal = 0;
        
        cart.forEach(item => {
            const itemTotal = item.price * item.quantity;
            subtotal += itemTotal;
            
            const totalFormatted = itemTotal.toLocaleString('en-PK', { style: 'currency', currency: 'PKR', minimumFractionDigits: 0 });

            html += `
            <div class="order-summary-item">
                <div class="d-flex justify-content-between">
                    <span>${item.name} x ${item.quantity}</span>
                    <span>${totalFormatted}</span>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
        
        const shipping = 300.00;
        const total = subtotal + shipping;
        
        document.getElementById('checkout-subtotal').textContent = subtotal.toLocaleString('en-PK', { style: 'currency', currency: 'PKR', minimumFractionDigits: 0 });
        document.getElementById('checkout-total').textContent = total.toLocaleString('en-PK', { style: 'currency', currency: 'PKR', minimumFractionDigits: 0 });
        document.getElementById('checkout-shipping').textContent = shipping.toLocaleString('en-PK', { style: 'currency', currency: 'PKR', minimumFractionDigits: 0 });
        
        const selectedPaymentMethod = document.querySelector('input[name="payment-method"]:checked');
        const paymentMethodReview = document.getElementById('payment-method-review');
        paymentMethodReview.innerHTML = `<p><strong>Method:</strong> ${selectedPaymentMethod ? selectedPaymentMethod.nextElementSibling.textContent.trim() : 'Not selected'}</p>`;

        const billingForm = document.getElementById('billing-form');
        const firstName = billingForm.querySelector('input[placeholder="First Name"]').value;
        const lastName = billingForm.querySelector('input[placeholder="Last Name"]').value;
        const address = billingForm.querySelector('input[placeholder="House Number Street Name"]').value;
        const phone = billingForm.querySelector('input[type="tel"]').value;
        
        const billingReview = document.getElementById('billing-details-review');
        billingReview.innerHTML = `
            <p>${firstName} ${lastName}</p>
            <p>${address}</p>
            <p>Phone: ${phone}</p>
        `;
    }
    
    function placeOrder() {
        if (cart.length === 0) {
            showAlert('Your cart is empty', 'error');
            return;
        }
        
        showAlert('Order placed successfully! Thank you for your purchase.', 'success');
        
        cart = [];
        updateCartBadge();
        
        setTimeout(() => {
            showSection('home');
        }, 3000);
    }

    function showAlert(message, type) {
        const alert = document.createElement('div');
        alert.className = `alert alert-${type === 'error' ? 'danger' : type} alert-dismissible fade show position-fixed`;
        alert.style.top = '20px';
        alert.style.right = '20px';
        alert.style.zIndex = '9999';
        alert.style.minWidth = '300px';
        alert.innerHTML = `
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        document.body.appendChild(alert);
        
        setTimeout(() => {
            if (alert.parentNode) {
                alert.parentNode.removeChild(alert);
            }
        }, 5000);
    }
    
    document.getElementById('contact-form').addEventListener('submit', function(e) {
        e.preventDefault();
        showAlert('Your message has been sent successfully! We will get back to you soon.', 'success');
        this.reset();
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', initialAppLoad);
</script>
</body>

</html>
