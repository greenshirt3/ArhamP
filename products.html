<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Catalog Viewer - All Data</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background-color: #f4f4f9; }
        .product-card { 
            background-color: white; 
            border: 1px solid #ddd; 
            margin-bottom: 20px; 
            padding: 15px; 
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .product-title { color: #333; border-bottom: 2px solid #007bff; padding-bottom: 5px; margin-bottom: 10px; }
        .product-options { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; }
        .product-options div { font-weight: bold; width: 100%; margin-top: 10px; }
        .variation-tag { 
            display: inline-block; 
            padding: 5px 10px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
            cursor: pointer; 
            transition: background-color 0.3s;
            margin-right: 5px;
        }
        .variation-tag.selected { background-color: #007bff; color: white; border-color: #007bff; }
        .price-display { font-size: 1.2em; font-weight: bold; color: #28a745; }
        .category-title { color: #007bff; margin-top: 30px; margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
        .unstandardized-note { color: #888; font-size: 0.9em; margin-top: 5px; }
    </style>
</head>
<body>

    <h1>Standardized Product Catalog (All Data Included)</h1>
    <p>Products with the "All Options" section support clickable variations. Other products are shown with their original structure and a placeholder price.</p>

    <div id="catalog-container">
        </div>

    <script>
        // --- Full JSON Data (Embedded for execution) ---
        const productData = {
            "Business Essentials": {
                "Shine Visisting Cards": {
                    "All Options": [
                        { "Size": "3.5x2", "Quality": "Standard", "Finish": "Shine", "Sides": "Single Color", "price_per_unit": 1000 }
                    ]
                },
                "Mat Cards": {
                    "All Options": [
                        { "Size": "3.5x2", "Quality": "Standard", "Shape": "Round Corners", "Sides": "Double Side", "Finish": "Mat", "price_per_unit": 1200 },
                        { "Size": "3.5x2", "Quality": "Standard", "Shape": "Plain Corners", "Sides": "Double Side", "Finish": "Mat", "price_per_unit": 1000 }
                    ],
                    "Plain Corners": { "Custom": [{ "Printing Side": "Single side", "price_per_unit": 1900.0 }, { "Printing Side": "Double side", "price_per_unit": 2000.0 }] },
                    "Round Corners": { "Custom": [{ "Printing Side": "Single side", "price_per_unit": 2300.0 }, { "Printing Side": "Double side", "price_per_unit": 3000.0 }] }
                },
                "UV Cards": {
                    "All Options": [
                        { "Size": "3.5x2", "Quality": "Standard", "Shape": "Round Corners", "Sides": "Double Side", "Finish": "UV", "price_per_unit": 1500 }
                    ]
                },
                "Visisting Cards": {
                    "All Options": [
                        { "Finish": "Shine", "Size/Type": "Custom", "Printing Side": "Single side", "price_per_unit": 1800.0 },
                        { "Finish": "Shine", "Size/Type": "Custom", "Printing Side": "Double side", "price_per_unit": 2000.0 }
                    ]
                }
            },
            "Marketing Essentials": {
                "Pamphlets": {
                    "All Options": [
                        { "Size": "5.75x9", "Weight": "68 gms", "price_per_unit": 1.5 }, { "Size": "5.75x9", "Weight": "68 gms", "price_per_unit": 2.0 }, { "Size": "5.75x9", "Weight": "68 gms", "price_per_unit": 3.0 },
                        { "Size": "5.75x9", "Weight": "80gms", "price_per_unit": 2.0 }, { "Size": "5.75x9", "Weight": "80gms", "price_per_unit": 2.5 }, { "Size": "5.75x9", "Weight": "80gms", "price_per_unit": 4.0 },
                        { "Size": "A4", "Weight": "68 gms", "price_per_unit": 5.0 }, { "Size": "A4", "Weight": "80gms", "price_per_unit": 7.0 }
                    ]
                },
                "Flyers/Ishtihars": {
                    "5.75x9": {
                        "90gms Art Paper": [
                            { "Sides": "Single Side", "price_per_unit": 6.0 },
                            { "Sides": "Double Side", "price_per_unit": 9.0 }
                        ],
                        "113 gms Art Paper": [
                            { "Sides": "Single Side", "price_per_unit": 8.0 },
                            { "Sides": "Double Side", "price_per_unit": 12.0 }
                        ]
                    }
                },
                "Stickers": {
                    "3.5x2": { "Standard": [{ "Shape": "Round Corners", "price_per_unit": 1.5 }, { "Shape": "Plain Corners", "price_per_unit": 1.0 }] },
                    "7x10": { "Standard": [{ "Shape": "Round Corners", "price_per_unit": 5.0 }, { "Shape": "Plain Corners", "price_per_unit": 4.0 }] }
                }
            },
            "Office Essentials": {
                "Letterpads": {
                    "All Options": [
                        { "Size": "5.75x9", "Weight": "68 gms", "Printing Color": "Single Color", "price_per_unit": 2.5 }, { "Size": "5.75x9", "Weight": "68 gms", "Printing Color": "Two Colors", "price_per_unit": 3.0 }, { "Size": "5.75x9", "Weight": "68 gms", "Printing Color": "4 Colors", "price_per_unit": 4.5 },
                        { "Size": "5.75x9", "Weight": "80gms", "Printing Color": "Single Color", "price_per_unit": 3.0 }, { "Size": "5.75x9", "Weight": "80gms", "Printing Color": "Two Colors", "price_per_unit": 3.5 }, { "Size": "5.75x9", "Weight": "80gms", "Printing Color": "4 Colors", "price_per_unit": 5.0 },
                        { "Size": "5.75x9", "Weight": "100 gms", "Printing Color": "Single Color", "price_per_unit": 4.0 }, { "Size": "5.75x9", "Weight": "100 gms", "Printing Color": "Two Colors", "price_per_unit": 4.5 }, { "Size": "5.75x9", "Weight": "100 gms", "Printing Color": "4 Colors", "price_per_unit": 6.0 },
                        { "Size": "A4", "Weight": "68 gms", "Printing Color": "Single Color", "price_per_unit": 4.0 }, { "Size": "A4", "Weight": "68 gms", "Printing Color": "Two Colors", "price_per_unit": 5.0 }, { "Size": "A4", "Weight": "68 gms", "Printing Color": "4 Colors", "price_per_unit": 7.0 },
                        { "Size": "A4", "Weight": "80gms", "Printing Color": "Single Color", "price_per_unit": 4.5 }, { "Size": "A4", "Weight": "80gms", "Printing Color": "Two Colors", "price_per_unit": 5.5 }, { "Size": "A4", "Weight": "80gms", "Printing Color": "4 Colors", "price_per_unit": 8.0 },
                        { "Size": "A4", "Weight": "100 gms", "Printing Color": "Single Color", "price_per_unit": 5.0 }, { "Size": "A4", "Weight": "100 gms", "Printing Color": "Two Colors", "price_per_unit": 6.0 }, { "Size": "A4", "Weight": "100 gms", "Printing Color": "4 Colors", "price_per_unit": 9.0 }
                    ]
                },
                "Envelops": {
                    "9x4": { "80gms": [{ "Printing Color": "Single Color", "price_per_unit": 5.0 }, { "Printing Color": "Two Colors", "price_per_unit": 6.5 }, { "Printing Color": "4 Colors", "price_per_unit": 8.0 }] }
                },
                "Bill Books": {
                    "All Options": [
                        { "Size": "5.75x9", "Paper Type": "68 gms", "Printing Color": "Single Color", "price_per_unit": 10.0 }, { "Size": "5.75x9", "Paper Type": "80gms", "Printing Color": "4 Colors", "price_per_unit": 12.0 }, { "Size": "5.75x9", "Paper Type": "90gms Art Paper", "Printing Color": "4 Colors", "price_per_unit": 15.0 }, { "Size": "5.75x9", "Paper Type": "100 gms", "Printing Color": "4 Colors", "price_per_unit": 18.0 },
                        { "Size": "A4", "Paper Type": "68 gms", "Printing Color": "Single Color", "price_per_unit": 15.0 }, { "Size": "A4", "Paper Type": "80gms", "Printing Color": "Single Color", "price_per_unit": 18.0 }, { "Size": "A4", "Paper Type": "90gms Art Paper", "Printing Color": "4 Colors", "price_per_unit": 22.0 }, { "Size": "A4", "Paper Type": "100 gms", "Printing Color": "4 Colors", "price_per_unit": 25.0 },
                        { "Size": "9x11", "Paper Type": "80gms", "Printing Color": "4 Colors", "price_per_unit": 28.0 }, { "Size": "9x11", "Paper Type": "100 gms", "Printing Color": "4 Colors", "price_per_unit": 32.0 }
                    ]
                },
                "Carbonless Bill Books": { "Custom": { "Standard": [{ "Printing Color": "Single Color", "price_per_unit": 30.0 }] } },
                "File Covers": { "Custom": { "Art Card": [{ "Printing Color": "Single Color", "Sides": "Single Side", "price_per_unit": 40.0 }, { "Printing Color": "4 Colors", "Sides": "Single Side", "price_per_unit": 60.0 }, { "Printing Color": "4 Colors", "Sides": "Double Side", "price_per_unit": 80.0 }] } },
                "Rubber Stamp (Rectangular)": { "3.5x2": { "Standard": [{ "Type": "Manual Inking", "price_per_unit": 500 }] }, "1x0.39": { "Standard": [{ "Type": "Manual Inking", "price_per_unit": 200 }] }, "1.8x0.7": { "Standard": [{ "Type": "Manual Inking", "price_per_unit": 350 }] } },
                "Pencil Tray": { "Custom": { "Standard": [{ "Material": "Plastic", "price_per_unit": 600 }, { "Material": "Premium Plastic", "price_per_unit": 800 }, { "Material": "Metal", "price_per_unit": 1500 }] } }
            },
            "Wedding Invitation Cards": {
                "Standard": { "5x7": { "Glossy": [{ "Material": "Premium Cardstock", "price_per_unit": 45 }] }, "A5": { "Matte": [{ "Material": "Premium Cardstock", "price_per_unit": 55 }] } },
                "Laser Cut Invitations": { "Design": { "Standard": [{ "Material": "Premium Cardstock", "price_per_unit": 150 }] } }
            },
            "Panaflex Printing": {
                "Panaflex Banners": { "China Frontlit": { "rate": 50, "is_area_based": true }, "Star Frontlit": { "rate": 70, "is_area_based": true } }
            },
            "Photo Printing": {
                "PhotoPapers": { "7x5": { "Standard": [{ "Material": "Matte", "price_per_unit": 150 }] }, "A4": { "Standard": [{ "Material": "Matte", "price_per_unit": 250 }] } },
                "Photo Frames": { "Custom Sizes": { "Standard": [{ "Material": "Wood", "price_per_unit": 800 }] } }
            },
            "3D Wallpaper": {
                "3D Wallpaper": { "rate": 150, "min_area": 100, "is_area_based": true }
            },
            "Promotional Items": {
                "White T-Shirt (Adult Size)": { "Small": { "Standard": [{ "Price per Shirt": 1200 }] }, "Medium": { "Standard": [{ "Price per Shirt": 1300 }] }, "Large": { "Standard": [{ "Price per Shirt": 1400 }] } },
                "Mug": { "Custom": { "Standard": [{ "Shape": "Heart Shape", "Accessories": "Spoon Mug", "price_per_unit": 550 }, { "Shape": "Heart Shape", "Accessories": "Mug with Pirch", "price_per_unit": 650 }] } },
                "Metal Pen": { "Custom": { "Standard": [{ "Finish": "Shine", "price_per_unit": 150 }, { "Finish": "Mat", "price_per_unit": 120 }] } }
            },
            "Shields": {
                "Acrylic Shield": { "Size": { "10 inch": [{ "Engraving": "Standard Laser", "price_per_unit": 2500 }] } }
            },
            "Souvenirs": {
                "Custom Key Chain": { "Material": { "Standard": [{ "Type": "Metal (Engraved)", "price_per_unit": 350 }] } },
                "Locket with Picture": { "Small": { "Standard": [{ "Price per Locket": 300 }] }, "Large": { "Standard": [{ "Price per Locket": 500 }] } }
            },
            "Flags and Fabric": {
                "National Flag (Standard)": { "Size": { "3x5 ft": [{ "Material": "Polyester", "price_per_unit": 1800 }] } },
                "Flag Printing": { "Polyester": { "rate": 80, "is_area_based": true } }
            },
            "Box Packaging": {
                "Custom Product Box (Small)": { "Material": { "Art Card 300gsm": [{ "Finish": "Matte Lamination", "price_per_unit": 50 }] } },
                "Custom Box": { "Small": { "Card Stock": [{ "Price per Box": 100 }] }, "Medium": { "Corrugated": [{ "Price per Box": 250 }] } }
            },
            "Marketing and Advertising": {
                "Document Printing (A4/Legal)": {
                    "A4": { "black_white": { "70g": { "1-100": 10, "401-1000": 6 } }, "color": { "70g": { "1-100": 20, "401-1000": 16 } } },
                    "Legal": { "black_white": { "70g": { "1-100": 12, "401-1000": 8 } }, "color": { "70g": { "1-100": 22, "401-1000": 18 } } }
                },
                "Social Media Campaign Design": { "Platform": { "Standard": [{ "Design Type": "3 Posts Package", "price_per_unit": 3000 }] } },
                "Brochure Design": { "A4 Bi-fold": { "Standard": [{ "Design Fee": 2500 }] }, "A4 Tri-fold": { "Standard": [{ "Design Fee": 3500 }] } }
            }
        };

        const catalogContainer = document.getElementById('catalog-container');

        // --- CORE LOGIC ---

        // Function to find the starting price for non-standardized/unflatted products
        function getStartingPrice(product) {
            if (typeof product === 'object' && product !== null) {
                // If the product has a flat list, get the first price
                if (product.hasOwnProperty('All Options') && Array.isArray(product['All Options'])) {
                    return product['All Options'][0].price_per_unit || 'N/A';
                }
                
                // Recursively search for the first price_per_unit, Price per Shirt, etc.
                for (const key in product) {
                    const value = product[key];
                    if (key === 'price_per_unit' || key.startsWith('Price per') || key.endsWith('Fee') || key === 'rate') {
                        return value;
                    }
                    if (typeof value === 'object' && value !== null) {
                        const subPrice = getStartingPrice(value);
                        if (subPrice !== 'N/A') return subPrice;
                    }
                }
            }
            return 'N/A';
        }

        function renderCatalog() {
            catalogContainer.innerHTML = ''; // Clear previous content

            for (const category in productData) {
                if (Object.hasOwnProperty.call(productData, category)) {
                    catalogContainer.innerHTML += `<h2 class="category-title">üì¶ ${category}</h2>`;

                    const products = productData[category];
                    for (const productName in products) {
                        if (Object.hasOwnProperty.call(products, productName)) {
                            const product = products[productName];

                            // Check if the product is standardized with the "All Options" array
                            if (product.hasOwnProperty('All Options') && Array.isArray(product['All Options'])) {
                                const options = product['All Options'];
                                renderStandardProductCard(productName, options);
                            } else {
                                // Render original, non-standardized products as simple cards
                                renderNonStandardProductCard(productName, product);
                            }
                        }
                    }
                }
            }
        }

        function renderNonStandardProductCard(name, product) {
            const card = document.createElement('div');
            card.className = 'product-card';
            
            const startingPrice = getStartingPrice(product);
            
            card.innerHTML = `
                <h3 class="product-title">${name}</h3>
                <div class="unstandardized-note">‚ö†Ô∏è Data structure is nested (original format). Variation selection is NOT supported.</div>
                <div class="price-display">Starting Price: ${startingPrice}</div>
            `;
            catalogContainer.appendChild(card);
        }

        function renderStandardProductCard(name, options) {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.id = `card-${name.replace(/\s+/g, '-')}`;

            // 1. Identify all unique variation attributes 
            const attributes = {};
            options.forEach(option => {
                for (const key in option) {
                    // Exclude price_per_unit, Price per Shirt, etc.
                    if (key !== 'price_per_unit' && !key.startsWith('Price per') && key !== 'Design Fee') {
                        if (!attributes[key]) {
                            attributes[key] = new Set();
                        }
                        attributes[key].add(option[key]);
                    }
                }
            });

            card.innerHTML = `<h3 class="product-title">${name}</h3>`;
            
            const selectorsDiv = document.createElement('div');
            selectorsDiv.className = 'product-options';
            card.appendChild(selectorsDiv);

            // 2. Render clickable tags for each attribute
            for (const attrName in attributes) {
                const uniqueValues = Array.from(attributes[attrName]);
                
                const attrHeader = document.createElement('div');
                attrHeader.textContent = `${attrName}:`;
                selectorsDiv.appendChild(attrHeader);
                
                uniqueValues.forEach(value => {
                    const tag = document.createElement('span');
                    tag.className = 'variation-tag';
                    tag.textContent = value;
                    tag.setAttribute('data-attr', attrName);
                    tag.setAttribute('data-value', value);
                    tag.onclick = (e) => updatePrice(e.target, name, options);
                    selectorsDiv.appendChild(tag);
                });
            }

            // 3. Initial Price Display
            const priceDiv = document.createElement('div');
            priceDiv.id = `price-${name.replace(/\s+/g, '-')}`;
            priceDiv.className = 'price-display';
            priceDiv.textContent = `Starting Price: ${options[0].price_per_unit || 'N/A'}`;
            card.appendChild(priceDiv);

            catalogContainer.appendChild(card);
        }

        function updatePrice(clickedTag, productName, options) {
            const productCard = clickedTag.closest('.product-card');
            const attrName = clickedTag.getAttribute('data-attr');
            const attrValue = clickedTag.getAttribute('data-value');

            // 1. Toggle selection for the clicked attribute group
            const tags = productCard.querySelectorAll(`[data-attr="${attrName}"]`);
            tags.forEach(tag => tag.classList.remove('selected'));
            clickedTag.classList.add('selected');

            // 2. Collect all currently selected attributes
            const currentSelections = {};
            let selectionCount = 0;
            productCard.querySelectorAll('.variation-tag.selected').forEach(tag => {
                currentSelections[tag.getAttribute('data-attr')] = tag.getAttribute('data-value');
                selectionCount++;
            });

            // 3. Find the matching price option based on current selections
            let finalMatch = null;
            let requiredAttributes = 0;
            
            // Get the total number of unique attributes for this product
            if (options.length > 0) {
                 requiredAttributes = Object.keys(options[0]).filter(key => key !== 'price_per_unit' && !key.startsWith('Price per') && key !== 'Design Fee').length;
            }

            options.forEach(option => {
                let matchCounter = 0;
                let isMatch = true;

                for (const key in currentSelections) {
                    // Check if the option has the key AND the value matches
                    if (option.hasOwnProperty(key) && String(option[key]) === currentSelections[key]) {
                        matchCounter++;
                    } else if (option.hasOwnProperty(key)) {
                        // If the option has the key but the value doesn't match, it's not the right option
                        isMatch = false;
                        break;
                    }
                }
                
                // We're looking for the exact price (100% match to the required attributes)
                if (isMatch && matchCounter === requiredAttributes) {
                    finalMatch = option;
                }
            });

            // 4. Update the display
            const priceDiv = document.getElementById(`price-${productName.replace(/\s+/g, '-')}`);
            if (finalMatch) {
                // Determine the price key dynamically (price_per_unit, Price per Shirt, etc.)
                const priceKey = Object.keys(finalMatch).find(key => key.includes('price_per_unit') || key.includes('Price per') || key.includes('Fee')) || 'price_per_unit';
                
                priceDiv.textContent = `‚úÖ Price: ${finalMatch[priceKey]}`;
            } else if (selectionCount > 0) {
                 priceDiv.textContent = `... Please select ${requiredAttributes - selectionCount} more option(s) for final price.`;
            } else {
                priceDiv.textContent = `Starting Price: ${options[0].price_per_unit || 'N/A'}`;
            }
        }

        // Initialize the page
        renderCatalog();

    </script>

</body>
</html>
